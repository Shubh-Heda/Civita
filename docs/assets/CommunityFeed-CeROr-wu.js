var xe=Object.defineProperty,ue=Object.defineProperties;var pe=Object.getOwnPropertyDescriptors;var Q=Object.getOwnPropertySymbols;var ge=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable;var X=(x,o,l)=>o in x?xe(x,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):x[o]=l,D=(x,o)=>{for(var l in o||(o={}))ge.call(o,l)&&X(x,l,o[l]);if(Q)for(var l of Q(o))fe.call(o,l)&&X(x,l,o[l]);return x},$=(x,o)=>ue(x,pe(o));var I=(x,o,l)=>new Promise((N,d)=>{var u=m=>{try{w(l.next(m))}catch(U){d(U)}},S=m=>{try{w(l.throw(m))}catch(U){d(U)}},w=m=>m.done?N(m.value):Promise.resolve(m.value).then(u,S);w((l=l.apply(x,o)).next())});import{r as n,j as e}from"./ui-vendor-nuurtrVt.js";import{B as M,X as ee,n as be,U as oe,h as b,s as F,m as i,Z as je,e as ve,H as se,T as ye,y as Ne}from"./index-Dp-8Rdet.js";import{m as te,c as we}from"./communityPostService-BhPOQZfx.js";import{I as K}from"./image-CzImxzPF.js";import{M as le}from"./map-pin-dgmPVUiH.js";import{V as ke}from"./video-B-bfkOlc.js";import{U as _e}from"./upload-B2cwlh8W.js";import{L as J,D as Se}from"./DiscordLikeRooms-DdvzZLH7.js";import{C as Ce}from"./check-Kp8IBxkO.js";import{B as Pe}from"./badge-CktKq16L.js";import{A as Me}from"./arrow-left-3xricN8T.js";import{C as Y}from"./camera-u7jSUr7H.js";import{B as ae}from"./bell-B0ZIL3lz.js";import{A as re}from"./activity-ICpxaTzG.js";import{F as Ue}from"./flame-wR_2vgM3.js";import{S as ie}from"./send-CrWsU_NL.js";import{M as De}from"./message-circle-B3iZHPQz.js";import{S as $e}from"./share-2-Cp-JSdVN.js";import{B as Ie}from"./bookmark-xc8mavle.js";import{A as Fe}from"./index-DPOCzKQs.js";import"./react-vendor-DwRCIQB9.js";import"./animation-vendor-BS_UIQcx.js";import"./supabase-vendor-FQ_Qbeq7.js";import"./plus-DEMvRL5u.js";import"./globe-Cpsoh4F_.js";import"./lock-PCVIiT-F.js";import"./message-square-BQsXK6wg.js";import"./settings-r3t_GWk4.js";import"./mic-CcF8UPA5.js";function He({matchId:x,matchTitle:o,onClose:l,onUploadComplete:N}){const[d,u]=n.useState([]),[S,w]=n.useState([]),[m,U]=n.useState(""),[P,A]=n.useState(""),[p,z]=n.useState(!1),[C,H]=n.useState(0),R=n.useRef(null),E=r=>{const h=Array.from(r.target.files||[]),y=te.validateFiles(h);if(!y.valid){b.error(y.errors.join(", "));return}const k=h.slice(0,4-d.length);u(j=>[...j,...k]),k.forEach(j=>{const B=new FileReader;B.onload=W=>{w(T=>{var G;return[...T,(G=W.target)==null?void 0:G.result]})},B.readAsDataURL(j)})},O=r=>{u(h=>h.filter((y,k)=>k!==r)),w(h=>h.filter((y,k)=>k!==r))},V=()=>I(null,null,function*(){if(d.length===0&&!m){b.error("Please add photos/videos or write a caption");return}z(!0);try{const r=m||`${o?`Great match at ${o}! `:""}Check out these memories ðŸ“¸`,h=yield we.post.createPost({content:r,category:"sports",location:P||void 0});if(d.length>0&&h){let y=0;for(const k of d)yield te.uploadMedia(k,h.id,y),y++,H(y/d.length*100)}b.success("Memory shared successfully! ðŸŽ‰"),N==null||N(),l()}catch(r){console.error("Error uploading memory:",r),b.error("Failed to upload. Please try again.")}finally{z(!1),H(0)}});return e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between sticky top-0 bg-white z-10",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(K,{className:"w-5 h-5 text-cyan-600"}),"Share Match Memory"]}),o&&e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:o})]}),e.jsx(M,{variant:"ghost",size:"sm",onClick:l,disabled:p,children:e.jsx(ee,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Caption"}),e.jsx("textarea",{value:m,onChange:r=>U(r.target.value),placeholder:"Share your thoughts about this match... What made it special?",className:"w-full min-h-[100px] p-3 border rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-cyan-500",disabled:p})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2 flex items-center gap-2",children:[e.jsx(le,{className:"w-4 h-4"}),"Location (Optional)"]}),e.jsx(be,{value:P,onChange:r=>A(r.target.value),placeholder:"Where was this match?",disabled:p})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2 flex items-center gap-2",children:[e.jsx(K,{className:"w-4 h-4"}),"Photos & Videos (",d.length,"/4)"]}),e.jsx("input",{ref:R,type:"file",accept:"image/*,video/*",multiple:!0,onChange:E,className:"hidden",disabled:p||d.length>=4}),S.length>0&&e.jsx("div",{className:"grid grid-cols-2 gap-3 mb-3",children:S.map((r,h)=>e.jsxs("div",{className:"relative group",children:[d[h].type.startsWith("video/")?e.jsxs("div",{className:"relative",children:[e.jsx("video",{src:r,className:"w-full h-32 object-cover rounded-lg"}),e.jsx(ke,{className:"absolute inset-0 m-auto w-10 h-10 text-white"})]}):e.jsx("img",{src:r,alt:"",className:"w-full h-32 object-cover rounded-lg"}),!p&&e.jsx("button",{onClick:()=>O(h),className:"absolute top-2 right-2 bg-black/70 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(ee,{className:"w-4 h-4"})})]},h))}),d.length<4&&e.jsxs("button",{onClick:()=>{var r;return(r=R.current)==null?void 0:r.click()},disabled:p,className:"w-full border-2 border-dashed border-slate-300 rounded-lg p-6 hover:border-cyan-500 hover:bg-cyan-50 transition-colors flex flex-col items-center justify-center gap-2 disabled:opacity-50",children:[e.jsx(_e,{className:"w-8 h-8 text-slate-400"}),e.jsx("span",{className:"text-sm text-slate-600",children:"Click to upload photos or videos"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Max 4 files â€¢ Photos up to 10MB â€¢ Videos up to 100MB"})]})]}),p&&e.jsxs("div",{className:"bg-cyan-50 rounded-lg p-4 border border-cyan-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(J,{className:"w-5 h-5 text-cyan-600 animate-spin"}),e.jsx("span",{className:"text-sm font-medium text-cyan-900",children:"Uploading memory..."})]}),e.jsx("div",{className:"w-full bg-cyan-200 rounded-full h-2",children:e.jsx("div",{className:"bg-cyan-600 h-2 rounded-full transition-all duration-300",style:{width:`${C}%`}})}),e.jsxs("span",{className:"text-xs text-cyan-700 mt-1 block",children:[Math.round(C),"% complete"]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsxs("h4",{className:"font-semibold text-blue-900 mb-2 flex items-center gap-2",children:[e.jsx(oe,{className:"w-4 h-4"}),"Tips for Great Memories"]}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"â€¢ Tag teammates to share the moment together"}),e.jsx("li",{children:"â€¢ Add location so others can discover great venues"}),e.jsx("li",{children:"â€¢ Share what made this match special"}),e.jsx("li",{children:"â€¢ Photos of celebrations, action shots, or team huddles work best!"})]})]})]}),e.jsxs("div",{className:"p-6 border-t bg-slate-50 flex gap-3",children:[e.jsx(M,{variant:"outline",onClick:l,disabled:p,className:"flex-1",children:"Cancel"}),e.jsx(M,{onClick:V,disabled:p||d.length===0&&!m.trim(),className:"flex-1 bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600 text-white gap-2",children:p?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"w-4 h-4 animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ce,{className:"w-4 h-4"}),"Share Memory"]})})]})]})})}function hs({onNavigate:x,matches:o}){const[l,N]=n.useState(!1),[d,u]=n.useState([]),[S,w]=n.useState(!0),[m,U]=n.useState(""),[P,A]=n.useState(""),[p,z]=n.useState(!1),[C,H]=n.useState([]),[R,E]=n.useState(!1),[O,V]=n.useState(null),[r,h]=n.useState(""),[y,k]=n.useState(0),[j,B]=n.useState("match-notifications"),W=n.useRef(null),T=3,G=[{id:"match-notifications",name:"Match Notifications",icon:e.jsx(ae,{className:"w-5 h-5"}),description:"Live match updates & friend activity",color:"from-cyan-400 to-blue-500",bgGradient:"from-cyan-500/10 to-blue-500/10",accentColor:"cyan"},{id:"activity-heatmap",name:"Activity Heatmap",icon:e.jsx(re,{className:"w-5 h-5"}),description:"Your community engagement stats",color:"from-orange-400 to-red-500",bgGradient:"from-orange-500/10 to-red-500/10",accentColor:"orange"},{id:"vibe-rooms",name:"Vibe Rooms",icon:e.jsx(oe,{className:"w-5 h-5"}),description:"Live voice & text rooms",color:"from-purple-400 to-pink-500",bgGradient:"from-purple-500/10 to-pink-500/10",accentColor:"purple"}];n.useEffect(()=>{Z(),ne()},[]);const ne=()=>I(null,null,function*(){const{data:{user:s}}=yield F.auth.getUser();U((s==null?void 0:s.id)||"demo-user")}),Z=()=>I(null,null,function*(){w(!0);try{const{data:{user:s}}=yield F.auth.getUser();if(s){const{data:t,error:c}=yield F.from("community_posts").select("*").eq("category","sports").order("created_at",{ascending:!1}).limit(20);if(t&&t.length>0&&!c){u(t.slice(0,3)),w(!1);return}}q()}catch(s){console.error("Error loading posts:",s),q()}finally{w(!1)}}),q=()=>{u([{id:"mock-1",user_id:"user-1",content:"Just finished an amazing match! ðŸ’« Huge shoutout to everyone for bringing such great energy. This community makes every game special! ðŸ™âš½",category:"sports",like_count:24,comment_count:8,share_count:2,created_at:new Date(Date.now()-72e5).toISOString(),updated_at:new Date(Date.now()-72e5).toISOString(),author:{user_id:"user-1",display_name:"Sarah Martinez",username:"sarah_m",avatar_url:void 0}},{id:"mock-2",user_id:"user-2",content:"Just got back from an incredible inter-city match! ðŸ Our team represented Ahmedabad and we won by 45 runs. The atmosphere was electric! ðŸŽ‰",category:"sports",like_count:156,comment_count:43,share_count:12,created_at:new Date(Date.now()-864e5).toISOString(),updated_at:new Date(Date.now()-864e5).toISOString(),author:{user_id:"user-2",display_name:"Jason Kumar",username:"jason_k",avatar_url:void 0}},{id:"mock-3",user_id:"user-3",content:`Recovery tips after intense matches ðŸ’ª

1. Hydrate within 30 minutes
2. Light stretching
3. Protein-rich snack
4. Quality sleep - 7-8 hours`,category:"sports",like_count:92,comment_count:31,share_count:18,created_at:new Date(Date.now()-1728e5).toISOString(),updated_at:new Date(Date.now()-1728e5).toISOString(),author:{user_id:"user-3",display_name:"Coach Priya",username:"coach_priya",avatar_url:void 0}}].slice(0,3))},ce=()=>I(null,null,function*(){if(!P.trim()&&C.length===0){b.error("Please write something or select media");return}z(!0);try{const{data:{user:s}}=yield F.auth.getUser();let t=[];if(C.length>0&&s){E(!0);for(const a of C){const v=a.name.split(".").pop(),_=`${s.id}-${Date.now()}.${v}`,{data:g,error:f}=yield F.storage.from("community-media").upload(_,a);if(g&&!f){const{data:{publicUrl:L}}=F.storage.from("community-media").getPublicUrl(_);t.push(L)}}E(!1)}if(s){const{data:a,error:v}=yield F.from("community_posts").insert({author_id:s.id,content:P,category:"sports",media_urls:t.length>0?t:null}).select().single();if(a&&!v){const _=$(D({},a),{like_count:0,comment_count:0,share_count:0,author:{user_id:s.id,display_name:"You",username:"you",avatar_url:void 0}});u(g=>[_,...g].slice(0,3)),A(""),H([]),b.success("Post shared! ðŸŽ‰");return}}const c={id:`mock-${Date.now()}`,user_id:m,content:P,category:"sports",like_count:0,comment_count:0,share_count:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),author:{user_id:m,display_name:"You",username:"you",avatar_url:void 0}};u(a=>[c,...a].slice(0,3)),A(""),b.success("Post shared! ðŸŽ‰")}catch(s){console.error("Error creating post:",s),b.error("Failed to post")}finally{z(!1)}}),de=s=>I(null,null,function*(){u(t=>t.map(c=>{if(c.id===s){const a=!c.is_liked;return $(D({},c),{is_liked:a,like_count:a?c.like_count+1:c.like_count-1})}return c}))}),me=s=>I(null,null,function*(){u(c=>c.map(a=>a.id===s?$(D({},a),{is_bookmarked:!a.is_bookmarked}):a));const t=d.find(c=>c.id===s);b.success(t!=null&&t.is_bookmarked?"Removed":"Bookmarked! ðŸ”–")}),he=s=>{const t=new Date(s),a=new Date().getTime()-t.getTime(),v=Math.floor(a/6e4),_=Math.floor(a/36e5),g=Math.floor(a/864e5);return v<1?"Just now":v<60?`${v}m ago`:_<24?`${_}h ago`:g<7?`${g}d ago`:t.toLocaleDateString()};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 text-slate-100",children:[e.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-cyan-500/10 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-purple-500/10 rounded-full blur-3xl"})]}),l&&e.jsx(He,{onClose:()=>N(!1),onUploadComplete:()=>{b.success("Memory shared!"),Z()}}),e.jsx("header",{className:"relative z-40 backdrop-blur-sm border-b border-slate-800/50 bg-slate-950/80",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(M,{variant:"ghost",onClick:()=>x("dashboard"),className:"gap-2 hover:bg-slate-800 text-slate-100",children:[e.jsx(Me,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Back"})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent",children:"Community Hub"}),e.jsx("p",{className:"text-xs text-slate-400",children:"Connect with your community"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(M,{onClick:()=>N(!0),className:"bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700 text-white gap-2 rounded-full px-4 shadow-lg shadow-cyan-500/25",children:[e.jsx(Y,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Share"})]})})]})})}),e.jsxs("div",{className:"relative z-20 max-w-6xl mx-auto px-4 py-8 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-sm font-semibold text-slate-400 uppercase tracking-wider",children:"Categories"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:G.map(s=>e.jsxs(i.button,{onClick:()=>B(s.id),className:`relative overflow-hidden rounded-xl p-4 transition-all duration-300 group ${j===s.id?`bg-gradient-to-br ${s.bgGradient} border-2 border-${s.accentColor}-500/50 shadow-lg shadow-${s.accentColor}-500/20`:"bg-slate-800/40 border border-slate-700/50 hover:border-slate-600/50 hover:bg-slate-800/60"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[j===s.id&&e.jsx(i.div,{className:`absolute inset-0 bg-gradient-to-r ${s.color} opacity-5`,animate:{opacity:[.05,.1,.05]},transition:{duration:3,repeat:1/0}}),e.jsxs("div",{className:"relative z-10 flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`p-2 rounded-lg bg-gradient-to-br ${s.color} text-white shadow-lg`,children:s.icon}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"font-bold text-slate-100",children:s.name}),e.jsx("p",{className:"text-xs text-slate-400",children:s.description})]})]}),j===s.id&&e.jsx(i.div,{className:`h-1 rounded-full bg-gradient-to-r ${s.color}`,layoutId:"active-indicator",transition:{type:"spring",stiffness:300,damping:30}})]})]},s.id))})]}),e.jsxs(Fe,{mode:"wait",children:[j==="match-notifications"&&e.jsx(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"space-y-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-cyan-500/10 to-blue-500/10 border border-cyan-500/20 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-gradient-to-br from-cyan-500 to-blue-600 text-white",children:e.jsx(ae,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-slate-100",children:"Live Match Updates"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Stay updated with your community's latest matches"})]})]}),e.jsx("div",{className:"space-y-3",children:o.slice(0,3).map((s,t)=>e.jsx(i.div,{className:"bg-slate-800/50 border border-slate-700/30 rounded-lg p-4 hover:bg-slate-800/80 transition-colors cursor-pointer group",whileHover:{x:4},children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-100 group-hover:text-cyan-300 transition-colors",children:s.title}),e.jsxs("div",{className:"flex gap-4 mt-2 text-sm text-slate-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(le,{className:"w-4 h-4"})," ",s.turfName]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(je,{className:"w-4 h-4"})," ",s.date," at ",s.time]})]})]}),e.jsx(Pe,{className:"bg-gradient-to-r from-cyan-500 to-blue-500 text-white",children:s.status})]})},t))})]})},"match-notifications"),j==="activity-heatmap"&&e.jsx(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"space-y-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-orange-500/10 to-red-500/10 border border-orange-500/20 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-3 rounded-lg bg-gradient-to-br from-orange-500 to-red-600 text-white",children:e.jsx(re,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-slate-100",children:"Your Activity Stats"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Track your community engagement"})]})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[{label:"Posts",value:"12",icon:e.jsx(ve,{className:"w-5 h-5"})},{label:"Interactions",value:"48",icon:e.jsx(se,{className:"w-5 h-5"})},{label:"This Week",value:"7",icon:e.jsx(ye,{className:"w-5 h-5"})},{label:"Streak",value:"5",icon:e.jsx(Ue,{className:"w-5 h-5"})}].map((s,t)=>e.jsxs(i.div,{className:"bg-slate-800/50 border border-slate-700/30 rounded-lg p-4 text-center hover:bg-slate-800/80 transition-colors",whileHover:{scale:1.05},children:[e.jsx("div",{className:"text-orange-400 flex justify-center mb-2",children:s.icon}),e.jsx("div",{className:"text-2xl font-bold text-slate-100",children:s.value}),e.jsx("div",{className:"text-xs text-slate-400 mt-1",children:s.label})]},t))}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-300",children:"Contribution Calendar"}),e.jsx("div",{className:"bg-slate-800/30 rounded-lg p-4 flex flex-wrap gap-1",children:Array.from({length:35}).map((s,t)=>e.jsx(i.div,{className:`w-3 h-3 rounded-sm ${Math.random()>.3?"bg-gradient-to-br from-orange-500 to-red-600":"bg-slate-700/40"}`,whileHover:{scale:1.5}},t))})]})]})},"activity-heatmap"),j==="vibe-rooms"&&e.jsx(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},ref:W,className:"-mx-6 -mb-6 -mt-2",children:e.jsx(Se,{category:"sports",onClose:()=>B("match-notifications")})},"vibe-rooms")]}),j!=="vibe-rooms"&&e.jsx(i.div,{className:"bg-slate-800/40 border border-slate-700/50 rounded-xl shadow-lg backdrop-blur-sm p-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white font-semibold flex-shrink-0 shadow-lg",children:m?m.charAt(0).toUpperCase():"Y"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("textarea",{value:P,onChange:s=>A(s.target.value),placeholder:j==="match-notifications"?"Share match moments, celebrate wins... ðŸŽ‰":"Share your activity insights... ðŸ“Š",className:"w-full border border-slate-700 bg-slate-800/50 hover:bg-slate-800 focus:bg-slate-800 rounded-lg px-4 py-3 text-slate-100 placeholder-slate-500 resize-none focus:outline-none focus:ring-2 focus:ring-cyan-400/50 transition-all text-sm",rows:3,disabled:p}),C.length>0&&e.jsx("div",{className:"mt-3 flex gap-2 flex-wrap",children:C.map((s,t)=>e.jsxs(i.div,{className:"relative group",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},children:[e.jsx("img",{src:URL.createObjectURL(s),alt:"preview",className:"w-20 h-20 object-cover rounded-lg border border-slate-600"}),e.jsx("button",{onClick:()=>H(c=>c.filter((a,v)=>v!==t)),className:"absolute -top-2 -right-2 bg-red-500 hover:bg-red-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs transition-colors shadow-lg",children:"Ã—"})]},t))}),e.jsxs("div",{className:"flex items-center justify-between mt-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"file",id:"media-upload",accept:"image/*,video/*",multiple:!0,className:"hidden",onChange:s=>{s.target.files&&H(t=>[...t,...Array.from(s.target.files)])}}),e.jsx("label",{htmlFor:"media-upload",className:"cursor-pointer text-slate-400 hover:text-cyan-400 hover:bg-slate-700/50 p-2 rounded-lg transition-all",children:e.jsx(K,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>N(!0),className:"text-slate-400 hover:text-cyan-400 hover:bg-slate-700/50 p-2 rounded-lg transition-all",children:e.jsx(Y,{className:"w-5 h-5"})})]}),e.jsx(M,{onClick:ce,disabled:!P.trim()&&C.length===0||p||R,className:"bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700 text-white gap-2 rounded-full px-4 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-cyan-500/25",size:"sm",children:p||R?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"w-4 h-4 animate-spin"})," Posting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"w-4 h-4"})," Post"]})})]})]})]})}),e.jsxs("div",{className:"space-y-4",children:[S&&e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(i.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0},children:e.jsx(J,{className:"w-8 h-8 text-cyan-500"})})}),!S&&d.slice(0,(y+1)*T).map((s,t)=>{var c,a,v,_;return e.jsxs(i.div,{className:"bg-slate-800/40 border border-slate-700/50 rounded-xl shadow-lg backdrop-blur-sm overflow-hidden hover:border-slate-600/50 transition-colors group",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:t*.1},whileHover:{borderColor:"rgba(96, 165, 250, 0.5)"},children:[e.jsxs("div",{className:"p-4 flex items-start gap-3",children:[e.jsx(i.div,{className:"w-10 h-10 rounded-full bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center text-white font-semibold flex-shrink-0 shadow-lg",whileHover:{scale:1.1},children:((a=(c=s.author)==null?void 0:c.display_name)==null?void 0:a.charAt(0))||"U"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-slate-100",children:((v=s.author)==null?void 0:v.display_name)||"User"}),((_=s.author)==null?void 0:_.username)&&e.jsxs("span",{className:"text-sm text-slate-500",children:["@",s.author.username]})]}),e.jsx("span",{className:"text-xs text-slate-500",children:he(s.created_at)})]})]}),e.jsx("div",{className:"px-4 pb-3",children:e.jsx("p",{className:"text-slate-200 whitespace-pre-wrap break-words",children:s.content})}),e.jsxs("div",{className:"px-4 pb-3 flex items-center gap-6 text-sm border-t border-slate-700/30 pt-3",children:[e.jsxs(i.button,{onClick:()=>de(s.id),className:`flex items-center gap-2 transition-colors group/btn ${s.is_liked?"text-red-400":"text-slate-400 hover:text-red-400"}`,whileHover:{scale:1.1},children:[e.jsx(se,{className:`w-5 h-5 ${s.is_liked?"fill-red-400":"group-hover/btn:fill-red-400/50"}`}),e.jsx("span",{className:"font-medium",children:s.like_count})]}),e.jsxs(i.button,{onClick:()=>V(O===s.id?null:s.id),className:"flex items-center gap-2 text-slate-400 hover:text-cyan-400 transition-colors group/btn",whileHover:{scale:1.1},children:[e.jsx(De,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:s.comment_count})]}),e.jsxs(i.button,{onClick:()=>{u(g=>g.map(f=>f.id===s.id?$(D({},f),{share_count:f.share_count+1}):f)),b.success("Shared! ðŸ”—")},className:"flex items-center gap-2 text-slate-400 hover:text-purple-400 transition-colors group/btn",whileHover:{scale:1.1},children:[e.jsx($e,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:s.share_count})]}),e.jsx(i.button,{onClick:()=>me(s.id),className:`ml-auto transition-colors ${s.is_bookmarked?"text-cyan-400":"text-slate-400 hover:text-cyan-400"}`,whileHover:{scale:1.1},children:e.jsx(Ie,{className:`w-5 h-5 ${s.is_bookmarked?"fill-cyan-400":""}`})})]}),O===s.id&&e.jsxs(i.div,{className:"border-t border-slate-700/30 bg-slate-800/20 p-4 space-y-3",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:[e.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:[e.jsxs("div",{className:"flex gap-2 items-start",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-orange-500 to-pink-600 flex items-center justify-center text-white text-sm font-semibold flex-shrink-0",children:"J"}),e.jsxs("div",{className:"flex-1 bg-slate-700/40 rounded-lg p-2 text-sm border border-slate-600/30",children:[e.jsx("p",{className:"font-semibold text-xs text-slate-300",children:"John Doe"}),e.jsx("p",{className:"text-slate-300",children:"Great match! Let's play again soon ðŸ”¥"})]})]}),e.jsxs("div",{className:"flex gap-2 items-start",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center text-white text-sm font-semibold flex-shrink-0",children:"S"}),e.jsxs("div",{className:"flex-1 bg-slate-700/40 rounded-lg p-2 text-sm border border-slate-600/30",children:[e.jsx("p",{className:"font-semibold text-xs text-slate-300",children:"Sarah M"}),e.jsx("p",{className:"text-slate-300",children:"Amazing energy today! ðŸ’ª"})]})]})]}),e.jsxs("div",{className:"flex gap-2 items-center pt-2 border-t border-slate-700/30",children:[e.jsx("input",{type:"text",value:r,onChange:g=>h(g.target.value),placeholder:"Write a comment...",className:"flex-1 border border-slate-700 bg-slate-800/50 hover:bg-slate-800 focus:bg-slate-800 rounded-full px-4 py-2 text-sm text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-cyan-400/50 transition-all",onKeyDown:g=>{g.key==="Enter"&&r.trim()&&(b.success("Comment posted! ðŸ’¬"),h(""),u(f=>f.map(L=>L.id===s.id?$(D({},L),{comment_count:L.comment_count+1}):L)))}}),e.jsx(i.button,{size:"sm",className:"p-2 rounded-full bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700 text-white transition-all shadow-lg shadow-cyan-500/25",onClick:()=>{r.trim()&&(b.success("Comment posted! ðŸ’¬"),h(""),u(g=>g.map(f=>f.id===s.id?$(D({},f),{comment_count:f.comment_count+1}):f)))},whileHover:{scale:1.05},children:e.jsx(ie,{className:"w-4 h-4"})})]})]})]},s.id)}),!S&&(y+1)*T<d.length&&e.jsx(i.div,{className:"text-center py-4",whileHover:{scale:1.02},children:e.jsxs(M,{onClick:()=>k(s=>s+1),className:"gap-2 bg-slate-800 hover:bg-slate-700 border border-slate-700 text-slate-100",children:[e.jsx(Ne,{className:"w-4 h-4"}),"Load More Posts"]})}),!S&&d.length===0&&e.jsxs(i.div,{className:"text-center py-12",initial:{opacity:0},animate:{opacity:1},children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸŒŸ"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-200 mb-2",children:"No posts yet in this category"}),e.jsx("p",{className:"text-slate-400 mb-4",children:"Be the first to share something amazing!"}),e.jsxs(M,{onClick:()=>N(!0),className:"bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700 text-white gap-2 rounded-full px-4",children:[e.jsx(Y,{className:"w-4 h-4"}),"Share Memory"]})]})]})]})]})}export{hs as CommunityFeed};
