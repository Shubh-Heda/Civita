var be=Object.defineProperty,ve=Object.defineProperties;var we=Object.getOwnPropertyDescriptors;var de=Object.getOwnPropertySymbols;var je=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable;var me=(a,s,r)=>s in a?be(a,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[s]=r,he=(a,s)=>{for(var r in s||(s={}))je.call(s,r)&&me(a,r,s[r]);if(de)for(var r of de(s))ye.call(s,r)&&me(a,r,s[r]);return a},fe=(a,s)=>ve(a,we(s));var f=(a,s,r)=>new Promise((d,u)=>{var h=b=>{try{w(r.next(b))}catch(S){u(S)}},l=b=>{try{w(r.throw(b))}catch(S){u(S)}},w=b=>b.done?d(b.value):Promise.resolve(b.value).then(h,l);w((r=r.apply(a,s)).next())});import{c as Q,s as N,z as Ne,B as C,m as B,U as ue,h as L}from"./index-Dp-8Rdet.js";import{r as m,j as e}from"./ui-vendor-nuurtrVt.js";import{B as pe}from"./badge-CktKq16L.js";import{P as ke}from"./plus-DEMvRL5u.js";import{G as Se}from"./globe-Cpsoh4F_.js";import{L as Re}from"./lock-PCVIiT-F.js";import{M as xe}from"./message-square-BQsXK6wg.js";import{C as Me}from"./check-Kp8IBxkO.js";import{S as _e}from"./share-2-Cp-JSdVN.js";import{S as Ce}from"./settings-r3t_GWk4.js";import{M as Ee}from"./mic-CcF8UPA5.js";import{V as Te}from"./video-B-bfkOlc.js";import{S as Ae}from"./send-CrWsU_NL.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],tt=Q("loader",Ve);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],Le=Q("mic-off",Pe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=[["path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91",key:"z86iuo"}],["line",{x1:"22",x2:"2",y1:"2",y2:"22",key:"11kh81"}]],$e=Q("phone-off",De);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],ze=Q("video-off",Oe),ge=[{id:"1",title:"Weekend Football Planning",description:"Lineups, timings, and who is bringing the cones.",category:"sports",type:"planning",host:"Alex Thompson",hostId:"mock-user-id",participants:["mock-user-id"],participantNames:["Alex Thompson"],maxParticipants:10,isPublic:!0,isActive:!0,tags:["Football","Weekend"],createdAt:Date.now()-36e5}],re=(a,s)=>{var d,u,h,l,w;const r=s||[];return{id:a.id,title:a.title,description:(d=a.description)!=null?d:void 0,category:a.category,type:a.type,host:a.host_name||"Host",hostId:a.host_id,participants:r.map(b=>b.user_id),participantNames:r.map(b=>b.display_name||"Guest"),maxParticipants:(u=a.max_participants)!=null?u:25,isPublic:(h=a.is_public)!=null?h:!0,isActive:(l=a.is_active)!=null?l:!0,tags:(w=a.tags)!=null?w:[],createdAt:a.created_at?new Date(a.created_at).getTime():Date.now()}},Y=a=>f(null,null,function*(){if(a.length===0)return new Map;const{data:s,error:r}=yield N.from("vibe_room_participants").select("*").in("room_id",a);if(r)throw r;const d=new Map;return(s||[]).forEach(u=>{const h=d.get(u.room_id)||[];h.push(u),d.set(u.room_id,h)}),d}),D={listRooms(a){return f(this,null,function*(){try{const{data:s,error:r}=yield N.from("vibe_rooms").select("*").eq("is_active",!0).order("created_at",{ascending:!1});if(r)throw r;const d=s||[],u=yield Y(d.map(l=>l.id)),h=d.map(l=>re(l,u.get(l.id)));return a&&a!=="all"?h.filter(l=>l.category===a):h}catch(s){return console.error("[vibeRoomService] listRooms fallback to mock because of error:",s),a&&a!=="all"?ge.filter(r=>r.category===a):ge}})},createRoom(a,s){return f(this,null,function*(){if(!(s!=null&&s.id))throw new Error("No authenticated user");const{data:r,error:d}=yield N.from("vibe_rooms").insert({title:a.title,description:a.description,category:a.category,type:a.type,tags:a.tags,max_participants:a.maxParticipants,is_public:a.isPublic,is_active:!0,host_id:s.id,host_name:s.name||s.email||"Host"}).select().single();if(d||!r)throw console.error("[vibeRoomService] createRoom failed",d),d||new Error("Failed to create vibe room");yield N.from("vibe_room_participants").upsert({room_id:r.id,user_id:s.id,display_name:s.name||s.email||"You",muted:!1,status:"listening"});const u=yield Y([r.id]);return re(r,u.get(r.id))})},joinRoom(a,s){return f(this,null,function*(){var b;if(!(s!=null&&s.id))throw new Error("No authenticated user");const{data:r,error:d}=yield N.from("vibe_rooms").select("*").eq("id",a).single();if(d||!r)throw d||new Error("Room not found");const h=(yield Y([a])).get(a)||[],l=(b=r.max_participants)!=null?b:25;if(h.length>=l)throw new Error("Room is full");yield N.from("vibe_room_participants").upsert({room_id:a,user_id:s.id,display_name:s.name||s.email||"Guest",muted:!1,status:"listening"});const w=yield Y([a]);return re(r,w.get(a))})},leaveRoom(a,s){return f(this,null,function*(){if(!(s!=null&&s.id))return;const{error:r}=yield N.from("vibe_room_participants").delete().eq("room_id",a).eq("user_id",s.id);if(r)throw r})},subscribeRooms(a){const s=N.channel("vibe-rooms-table").on("postgres_changes",{event:"*",schema:"public",table:"vibe_rooms"},a).subscribe();return()=>{N.removeChannel(s)}},subscribeParticipants(a,s){const r=N.channel(`vibe-rooms-${a}-participants`).on("postgres_changes",{event:"*",schema:"public",table:"vibe_room_participants",filter:`room_id=eq.${a}`},s).subscribe();return()=>{N.removeChannel(r)}},startRealtimeSession(a,s,r,d,u){const h=N.channel(`vibe-rooms-${a}-rt`,{config:{presence:{key:s.id||`anon-${Date.now()}`}}});return h.on("presence",{event:"sync"},()=>{const l=h.presenceState();d==null||d(l)}).on("broadcast",{event:"signal"},l=>{const w=l.payload;r==null||r(w)}).on("broadcast",{event:"chat"},l=>{const w=l.payload;u==null||u(w)}).subscribe(l=>f(null,null,function*(){l==="SUBSCRIBED"&&(yield h.track({userId:s.id,name:s.name||s.email||"Guest",joinedAt:Date.now()}))})),{roomId:a,channel:h,sendSignal:l=>f(null,null,function*(){yield h.send({type:"broadcast",event:"signal",payload:l})}),sendChat:l=>f(null,null,function*(){yield h.send({type:"broadcast",event:"chat",payload:l})}),leave:()=>{N.removeChannel(h)}}}};function Ie(a){const{user:s}=Ne(),[r,d]=m.useState([]),[u,h]=m.useState(!0),[l,w]=m.useState(null),[b,S]=m.useState({}),[oe,X]=m.useState([]),j=m.useRef(null),R=m.useRef(new Map),[p,G]=m.useState(null),[ne,Z]=m.useState(new Map),[$,T]=m.useState(!1),[q,M]=m.useState(!1),[ee,O]=m.useState([]),F=m.useMemo(()=>!a||a==="all"?"sports":a,[a]),E=()=>f(null,null,function*(){try{h(!0);const t=yield D.listRooms(a);d(t),w(null)}catch(t){w(t.message||"Unable to load vibe rooms"),d([])}finally{h(!1)}});m.useEffect(()=>{let t=null;return E(),t=D.subscribeRooms(E),()=>{t==null||t()}},[a]);const y=t=>f(null,null,function*(){yield E()}),te=t=>f(null,null,function*(){if(!s)throw new Error("Must be logged in to create a room");const i=fe(he({},t),{category:t.category||F}),n=yield D.createRoom(i,{id:s.id,name:s.name,email:s.email});return d(c=>[n,...c]),n}),se=t=>{var n;if(!s)return;(n=j.current)==null||n.leave();const i=D.startRealtimeSession(t,{id:s.id,name:s.name,email:s.email},c=>{X(v=>[c,...v].slice(0,50)),ie(c)},c=>{console.log("ðŸ‘¥ Presence updated:",Object.keys(c).length,"users"),S(c),p&&setTimeout(()=>P(),1e3)},c=>{O(v=>[...v,c].slice(-100))});j.current=i,O([])},z=()=>{R.current.forEach(t=>t.close()),R.current.clear(),Z(new Map)},H=t=>{R.current.forEach(i=>{i.getSenders().some(c=>c.track===t)||i.addTrack(t,p||new MediaStream([t]))})},A=()=>{p==null||p.getTracks().forEach(t=>t.stop()),G(null),T(!1),M(!1)},V=t=>f(null,null,function*(){if(p){const n=p.getVideoTracks().length>0;if(t!=null&&t.video&&!n){const c=yield navigator.mediaDevices.getUserMedia({video:!0}),[v]=c.getVideoTracks();v&&(p.addTrack(v),H(v),M(!0))}return p}const i=yield navigator.mediaDevices.getUserMedia({audio:!0,video:(t==null?void 0:t.video)||!1});return G(i),T(!0),M(((t==null?void 0:t.video)||!1)&&i.getVideoTracks().length>0),i}),x=()=>f(null,null,function*(){return V()}),I=()=>f(null,null,function*(){const t=yield V({video:!0});t.getVideoTracks().forEach(H),M(t.getVideoTracks().length>0),yield P()}),ae=()=>{if(!p)return;p.getVideoTracks().forEach(i=>{i.stop(),p.removeTrack(i)}),R.current.forEach(i=>{i.getSenders().forEach(n=>{n.track&&n.track.kind==="video"&&i.removeTrack(n)})}),M(!1)},W=t=>{if(!s||t===s.id)return null;let i=R.current.get(t);return i||(i=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"}]}),i.onicecandidate=n=>{n.candidate&&j.current&&(console.log("ðŸ§Š Sending ICE candidate to",t),j.current.sendSignal({kind:"ice",roomId:j.current.roomId,from:s.id,to:t,payload:n.candidate,timestamp:Date.now()}))},i.onconnectionstatechange=()=>{console.log(`ðŸ”— Connection state with ${t}:`,i==null?void 0:i.connectionState)},i.oniceconnectionstatechange=()=>{console.log(`â„ï¸ ICE connection state with ${t}:`,i==null?void 0:i.iceConnectionState)},i.oniceconnectionstatechange=()=>{console.log(`â„ï¸ ICE connection state with ${t}:`,i==null?void 0:i.iceConnectionState)},i.ontrack=n=>{console.log("ðŸ“¹ Received track from",t,n.track.kind);const[c]=n.streams;c?(console.log("âœ… Setting remote stream for",t,"with",c.getTracks().length,"tracks"),console.log("ðŸ“Š Stream tracks:",c.getVideoTracks().length,"video,",c.getAudioTracks().length,"audio"),Z(v=>{const k=new Map(v);return k.set(t,c),console.log("ðŸ—ºï¸ Remote streams map now has",k.size,"entries"),k})):console.error("âš ï¸ No stream in event.streams!")},p&&p.getTracks().forEach(n=>i.addTrack(n,p)),R.current.set(t,i),i)},ie=t=>f(null,null,function*(){if(!s||t.from===s.id)return;console.log(`ðŸ“¡ Received signal: ${t.kind} from ${t.from}`);const i=W(t.from);if(i)try{if(t.kind==="offer"){if(console.log("ðŸ“¥ Processing offer from",t.from),yield i.setRemoteDescription(new RTCSessionDescription(t.payload)),p){const c=i.getSenders();p.getTracks().forEach(v=>{c.find(le=>{var K;return((K=le.track)==null?void 0:K.kind)===v.kind})||(console.log("âž• Adding track to peer:",v.kind),i.addTrack(v,p))})}const n=yield i.createAnswer();yield i.setLocalDescription(n),console.log("ðŸ“¤ Sending answer to",t.from),j.current&&(yield j.current.sendSignal({kind:"answer",roomId:t.roomId,from:s.id,to:t.from,payload:n,timestamp:Date.now()}))}if(t.kind==="answer"&&(console.log("ðŸ“¥ Processing answer from",t.from),yield i.setRemoteDescription(new RTCSessionDescription(t.payload))),t.kind==="ice"&&t.payload)try{console.log("â„ï¸ Adding ICE candidate from",t.from),yield i.addIceCandidate(new RTCIceCandidate(t.payload))}catch(n){console.error("âŒ ICE add error",n)}}catch(n){console.error("âŒ Signal handling error:",n)}}),P=()=>f(null,null,function*(){if(!s||!p||!j.current){console.log("âš ï¸ Cannot offer: missing user, stream, or realtime session");return}const i=Object.keys(b||{}).filter(n=>n!==s.id);console.log("ðŸ“¢ Offering to peers:",i);for(const n of i){const c=W(n);if(c)try{const v=c.getSenders();if(p.getTracks().forEach(k=>{v.find(K=>{var ce;return((ce=K.track)==null?void 0:ce.kind)===k.kind})||(console.log("âž• Adding track before offer:",k.kind),c.addTrack(k,p))}),c.signalingState==="stable"||c.signalingState==="have-local-offer"){const k=yield c.createOffer();yield c.setLocalDescription(k),console.log("ðŸ“¤ Sending offer to",n),yield j.current.sendSignal({kind:"offer",roomId:j.current.roomId,from:s.id,to:n,payload:k,timestamp:Date.now()})}}catch(v){console.error(`âŒ Error offering to ${n}:`,v)}}}),U=t=>f(null,null,function*(){if(!s)throw new Error("Must be logged in to join a room");const i=yield D.joinRoom(t,{id:s.id,name:s.name,email:s.email});return yield y(),se(t),i}),J=t=>f(null,null,function*(){yield U(t),yield x(),yield P()}),o=(t,i)=>f(null,null,function*(){var c;if(!s)throw new Error("Must be logged in to chat");if(!i.trim())return;const n={id:`${s.id}-${Date.now()}`,roomId:t,userId:s.id,name:s.name||s.email||"Guest",text:i,timestamp:Date.now()};O(v=>[...v,n].slice(-100)),yield(c=j.current)==null?void 0:c.sendChat(n)}),g=()=>f(null,null,function*(){const t=r.filter(n=>n.isPublic&&n.isActive&&n.participants.length<n.maxParticipants);if(t.length===0)throw new Error("No available rooms right now");const i=t[Math.floor(Math.random()*t.length)];return J(i.id)}),_=t=>f(null,null,function*(){var i;if(!s)throw new Error("Must be logged in to leave a room");yield D.leaveRoom(t,{id:s.id,name:s.name,email:s.email}),((i=j.current)==null?void 0:i.roomId)===t&&(j.current.leave(),j.current=null,S({})),z(),A(),yield y()});return m.useEffect(()=>()=>{var t;(t=j.current)==null||t.leave(),z(),A()},[]),{rooms:r,loading:u,error:l,presence:b,signals:oe,localStream:p,remoteStreams:ne,voiceReady:$,videoEnabled:q,chatMessages:ee,createRoom:te,joinRoom:U,joinRoomWithVoice:J,joinRandomRoom:g,leaveRoom:_,refresh:E,startLocalAudio:x,startLocalMedia:V,stopLocalAudio:A,enableVideo:I,disableVideo:ae,offerToPeers:P,sendChatMessage:o}}function st({category:a="all",onClose:s}){const[r,d]=m.useState(null),[u,h]=m.useState(!0),[l,w]=m.useState(!1),[b,S]=m.useState(""),[oe,X]=m.useState(!1),[j,R]=m.useState(!1),[p,G]=m.useState(null),[ne,Z]=m.useState(70),$=m.useRef(null),T=m.useRef(null),q=m.useRef(new Map),{rooms:M,joinRoomWithVoice:ee,leaveRoom:O,presence:F,localStream:E,remoteStreams:y,enableVideo:te,disableVideo:se,chatMessages:z,sendChatMessage:H,startLocalMedia:A}=Ie(a),V=a==="all"?M:M.filter(o=>o.category===a),x=M.find(o=>o.id===r),I=x?Object.keys(F).length+1:0;m.useEffect(()=>{l&&E&&$.current&&($.current.srcObject=E)},[l,E]),m.useEffect(()=>{console.log("ðŸŽ¬ Setting up remote streams, count:",y.size),y.forEach((o,g)=>{const _=q.current.get(g);_&&(console.log("ðŸ“¹ Connecting stream to video element for",g),_.srcObject=o)})},[y]),m.useEffect(()=>{if(y.size>0&&T.current){const o=Array.from(y.values()).flatMap(g=>g.getAudioTracks());if(o.length>0){console.log("ðŸ”Š Setting up remote audio with",o.length,"tracks");const g=new MediaStream(o);T.current.srcObject=g}}},[y]);const ae=o=>f(null,null,function*(){try{d(o),yield ee(o),h(!1),L.success("Joined room successfully! ðŸŽ‰")}catch(g){L.error("Failed to join room",{description:g.message}),d(null)}}),W=()=>f(null,null,function*(){if(r)try{yield O(r),d(null),h(!0),w(!1),L.success("Left room")}catch(o){L.error("Failed to leave room",{description:o.message})}}),ie=()=>f(null,null,function*(){h(!u),u||(yield A("audio"))}),P=()=>f(null,null,function*(){w(!l),l?yield se():(yield A("video"),yield te())}),U=()=>f(null,null,function*(){if(!(!r||!b.trim()))try{yield H(r,b),S("")}catch(o){L.error("Failed to send message")}}),J=()=>{if(!r)return;const o=`${window.location.origin}?join_room=${r}`;navigator.clipboard.writeText(o),R(!0),setTimeout(()=>R(!1),2e3),L.success("Invite link copied! ðŸ“‹")};return r?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 flex flex-col",children:[e.jsx("audio",{ref:T,autoPlay:!0,playsInline:!0}),e.jsx("div",{className:"bg-slate-900/80 backdrop-blur-xl border-b border-slate-800 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-purple-600 to-pink-600 flex items-center justify-center text-white font-bold",children:x==null?void 0:x.title.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h1",{className:"text-xl font-bold text-white",children:["# ",x==null?void 0:x.title]}),e.jsxs("p",{className:"text-sm text-slate-400",children:[I," member",I!==1?"s":""," connected"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{variant:"ghost",size:"icon",onClick:J,className:"text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg",title:"Copy invite link",children:j?e.jsx(Me,{className:"w-5 h-5 text-emerald-500"}):e.jsx(_e,{className:"w-5 h-5"})}),e.jsx(C,{variant:"ghost",size:"icon",className:"text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg",title:"Settings",children:e.jsx(Ce,{className:"w-5 h-5"})})]})]})}),e.jsxs("div",{className:"flex-1 flex overflow-hidden gap-4 p-4",children:[e.jsxs("div",{className:"flex-1 flex flex-col gap-4",children:[e.jsx("div",{className:"flex-1 bg-slate-900/40 rounded-xl border border-slate-800 overflow-hidden",children:e.jsxs("div",{className:`w-full h-full grid gap-2 p-2 ${y.size===0?"grid-cols-1":y.size===1||y.size===2||y.size<=4?"grid-cols-2":"grid-cols-3"}`,children:[l&&e.jsxs("div",{className:"relative bg-slate-950 rounded-lg overflow-hidden flex items-center justify-center min-h-[200px]",children:[e.jsx("video",{ref:$,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute bottom-2 left-2 px-2 py-1 bg-black/70 rounded text-xs text-white font-semibold",children:"You"})]}),Array.from(y.entries()).map(([o,g],_)=>e.jsxs("div",{className:"relative bg-slate-950 rounded-lg overflow-hidden flex items-center justify-center min-h-[200px]",children:[e.jsx("video",{autoPlay:!0,playsInline:!0,ref:t=>{t&&(q.current.set(o,t),t.srcObject=g,console.log("ðŸ“º Remote video element mounted for",o))},className:"w-full h-full object-cover"}),e.jsxs("div",{className:"absolute bottom-2 left-2 px-2 py-1 bg-black/70 rounded text-xs text-white font-semibold",children:["Participant ",_+1]})]},o))]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(C,{onClick:ie,className:`gap-2 rounded-lg transition-all ${u?"bg-red-600 hover:bg-red-700":"bg-emerald-600 hover:bg-emerald-700"} text-white`,children:[u?e.jsx(Le,{className:"w-4 h-4"}):e.jsx(Ee,{className:"w-4 h-4"}),u?"Unmute":"Mute"]}),e.jsxs(C,{onClick:P,className:`gap-2 rounded-lg transition-all ${l?"bg-emerald-600 hover:bg-emerald-700":"bg-slate-700 hover:bg-slate-600"} text-white`,children:[l?e.jsx(Te,{className:"w-4 h-4"}):e.jsx(ze,{className:"w-4 h-4"}),l?"Camera On":"Camera"]})]}),e.jsxs(C,{onClick:W,className:"w-full gap-2 bg-red-600 hover:bg-red-700 text-white rounded-lg",children:[e.jsx($e,{className:"w-4 h-4"}),"Leave Room"]}),e.jsxs("div",{className:"flex-1 bg-slate-900/40 rounded-xl border border-slate-800 overflow-hidden flex flex-col",children:[e.jsx("div",{className:"px-4 py-3 border-b border-slate-800",children:e.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[e.jsx(ue,{className:"w-4 h-4"}),"Members ",I]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:Object.entries(F).map(([o,g])=>{var _;return e.jsxs(B.button,{initial:{opacity:0},animate:{opacity:1},onClick:()=>G(p===o?null:o),className:"w-full p-3 rounded-lg bg-slate-800/50 hover:bg-slate-700/50 transition-colors text-left group",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-cyan-600 to-blue-600 flex items-center justify-center text-white text-xs font-bold",children:((_=g.name)==null?void 0:_.charAt(0).toUpperCase())||"U"}),e.jsx("span",{className:"text-sm text-white font-medium truncate",children:g.name||"Guest"}),e.jsx(B.div,{animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},className:"ml-auto w-2 h-2 bg-emerald-500 rounded-full"})]}),p===o&&e.jsx("p",{className:"text-xs text-slate-400 ml-10",children:g.email||"No email"})]},o)})})]}),e.jsxs("div",{className:"bg-slate-900/40 rounded-xl border border-slate-800 p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-white mb-3",children:"Room Info"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between text-slate-400",children:[e.jsx("span",{children:"Category:"}),e.jsx("span",{className:"text-white capitalize",children:x==null?void 0:x.category})]}),e.jsxs("div",{className:"flex justify-between text-slate-400",children:[e.jsx("span",{children:"Host:"}),e.jsx("span",{className:"text-white",children:x==null?void 0:x.host})]}),e.jsxs("div",{className:"flex justify-between text-slate-400",children:[e.jsx("span",{children:"Type:"}),e.jsx("span",{className:"text-white capitalize",children:x==null?void 0:x.type})]}),e.jsxs("div",{className:"flex justify-between text-slate-400",children:[e.jsx("span",{children:"Status:"}),e.jsx("span",{className:x!=null&&x.isActive?"text-emerald-400":"text-slate-500",children:x!=null&&x.isActive?"Live":"Idle"})]})]})]})]}),e.jsxs("div",{className:"w-96 flex flex-col bg-slate-900/40 rounded-xl border border-slate-800 overflow-hidden",children:[e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:z.length===0?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(xe,{className:"w-12 h-12 text-slate-700 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-500",children:"Be the first to say hello! ðŸ‘‹"})]})}):z.map(o=>{var g;return e.jsx(B.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"group",children:e.jsxs("div",{className:"flex gap-3 hover:bg-slate-800/50 p-2 rounded-lg transition-colors",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-600 to-pink-600 flex items-center justify-center text-white font-bold text-sm flex-shrink-0",children:((g=o.name)==null?void 0:g.charAt(0).toUpperCase())||"U"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"font-semibold text-white text-sm",children:o.name||"Guest"}),e.jsx("span",{className:"text-xs text-slate-500",children:new Date(o.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),e.jsx("p",{className:"text-slate-200 text-sm break-words",children:o.text})]})]})},o.id)})}),e.jsx("div",{className:"border-t border-slate-800 p-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{value:b,onChange:o=>S(o.target.value),onKeyPress:o=>{o.key==="Enter"&&!o.shiftKey&&(o.preventDefault(),U())},placeholder:"Say something nice... ðŸ’¬",className:"flex-1 bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-purple-500"}),e.jsx(C,{onClick:U,className:"gap-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg",children:e.jsx(Ae,{className:"w-4 h-4"})})]})})]})]})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"ðŸŽ™ï¸ Vibe Rooms"}),e.jsx("p",{className:"text-slate-400",children:"Connect, chat, and collaborate with others in real-time"})]}),s&&e.jsx(C,{variant:"ghost",onClick:s,className:"text-slate-400 hover:text-white hover:bg-slate-800",children:"Close"})]}),e.jsx("div",{className:"mb-8",children:e.jsxs(C,{onClick:()=>X(!0),className:"gap-2 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white rounded-lg px-6 py-2",children:[e.jsx(ke,{className:"w-5 h-5"}),"Create Room"]})}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:V.map(o=>e.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"group relative overflow-hidden rounded-lg bg-gradient-to-br from-slate-800 to-slate-900 border border-slate-700 hover:border-purple-500 transition-all cursor-pointer",onClick:()=>ae(o.id),children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600/0 to-pink-600/0 group-hover:from-purple-600/20 group-hover:to-pink-600/20 transition-all"}),e.jsxs("div",{className:"relative p-5",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx(pe,{className:"bg-purple-500/20 text-purple-200 border-purple-500/30 mb-3",children:o.category}),e.jsx("h3",{className:"text-lg font-semibold text-white mb-1",children:o.title}),e.jsxs("p",{className:"text-sm text-slate-400",children:["Hosted by ",o.host]})]}),o.isPublic?e.jsx(Se,{className:"w-5 h-5 text-slate-500"}):e.jsx(Re,{className:"w-5 h-5 text-slate-500"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-300",children:[e.jsx(ue,{className:"w-4 h-4"}),e.jsxs("span",{children:[o.participants.length,"/",o.maxParticipants]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[o.isActive&&e.jsx(B.div,{animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},className:"w-2 h-2 bg-emerald-500 rounded-full"}),e.jsx("span",{className:o.isActive?"text-emerald-400":"text-slate-500",children:o.isActive?"Live":"Idle"})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:o.tags.slice(0,2).map(g=>e.jsx(pe,{variant:"secondary",className:"bg-slate-700 text-slate-200 text-xs rounded-full",children:g},g))}),e.jsx(C,{className:"w-full mt-4 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white rounded-lg",children:"Join Room"})]})]},o.id))}),V.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(xe,{className:"w-12 h-12 text-slate-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-400 text-lg",children:"No active rooms yet"}),e.jsx("p",{className:"text-slate-500 text-sm mt-2",children:"Be the first to create one!"})]})]})})}export{st as D,tt as L};
