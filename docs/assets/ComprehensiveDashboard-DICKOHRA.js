var ct=Object.defineProperty,ot=Object.defineProperties;var dt=Object.getOwnPropertyDescriptors;var le=Object.getOwnPropertySymbols;var Pe=Object.prototype.hasOwnProperty,Ae=Object.prototype.propertyIsEnumerable;var be=Math.pow,ge=(r,s,t)=>s in r?ct(r,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[s]=t,D=(r,s)=>{for(var t in s||(s={}))Pe.call(s,t)&&ge(r,t,s[t]);if(le)for(var t of le(s))Ae.call(s,t)&&ge(r,t,s[t]);return r},U=(r,s)=>ot(r,dt(s));var te=(r,s)=>{var t={};for(var a in r)Pe.call(r,a)&&s.indexOf(a)<0&&(t[a]=r[a]);if(r!=null&&le)for(var a of le(r))s.indexOf(a)<0&&Ae.call(r,a)&&(t[a]=r[a]);return t};var V=(r,s,t)=>ge(r,typeof s!="symbol"?s+"":s,t);var v=(r,s,t)=>new Promise((a,i)=>{var o=c=>{try{l(t.next(c))}catch(d){i(d)}},n=c=>{try{l(t.throw(c))}catch(d){i(d)}},l=c=>c.done?a(c.value):Promise.resolve(c.value).then(o,n);l((t=t.apply(r,s)).next())});import{j as e,r as p,u as qe,f as mt,g as ht,P as Xe,h as xt,i as ut,k as pt}from"./ui-vendor-nuurtrVt.js";import{c as q,U as K,m as x,I as Ve,C as he,S as xe,a as B,Z,T as H,b as z,d as T,B as $,e as R,R as ft,f as De,t as je,H as I,g as ke,u as gt,p as se,h as F,i as Ge,j as bt,k as G,l as Te,s as C,n as $e,L as Ye,o as Je,q as jt,X as yt}from"./index-DvbzyI8D.js";import{A as ie}from"./index-B8gLKG9C.js";import{C as vt}from"./camera-J36oJA51.js";import{L as Se}from"./lock-BeBcmVHR.js";import{T as Qe}from"./target-BBnSQiyK.js";import{A as ee}from"./award-riBKoavj.js";import{W as Me}from"./wallet-CdjPxldU.js";import{P as Ee}from"./plus-BsGHaHIV.js";import{G as Ue}from"./gift-mvap2feh.js";import{c as wt}from"./supabase-vendor-FQ_Qbeq7.js";import{n as Y}from"./notificationService-DVWENmHJ.js";import{B as L}from"./bell-BkgT9SpE.js";import{S as Nt}from"./smartphone-CKbMLk_8.js";import{M as kt}from"./mail-DNwqOor_.js";import{P as Ke}from"./palette-BfxTgHST.js";import{C as Fe}from"./check-Bc9x7qPW.js";import{S as St}from"./smile-DtHJa4cG.js";import{M as Ze}from"./map-pin-CW14yjCe.js";import{S as Mt}from"./send-Q2AREpcX.js";import{B as ue}from"./badge-CSla_laA.js";import{C as Q}from"./card-BPPmRq7M.js";import{M as Ct,T as _t,C as Pt,a as At}from"./map-vendor-Dx__-sQZ.js";import{S as Dt}from"./save-DTMiZ_T4.js";import{A as Tt}from"./activity-DkM1K-0s.js";import{C as $t}from"./credit-card-DuYv87Jy.js";import{S as Et}from"./settings-BuiRN1Q_.js";import{M as Ut}from"./message-square-CvnOgh36.js";import{C as Ft}from"./chevron-right-DPiNpNpC.js";import"./react-vendor-DwRCIQB9.js";import"./animation-vendor-BS_UIQcx.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],Lt=q("arrow-up-right",Wt);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],Rt=q("bell-ring",zt);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16.5 12",key:"1aq6pp"}]],Bt=q("clock-3",Ot);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=[["line",{x1:"22",x2:"2",y1:"6",y2:"6",key:"15w7dq"}],["line",{x1:"22",x2:"2",y1:"18",y2:"18",key:"1ip48p"}],["line",{x1:"6",x2:"6",y1:"2",y2:"22",key:"a2lnyx"}],["line",{x1:"18",x2:"18",y1:"2",y2:"22",key:"8vb6jd"}]],We=q("frame",Ht);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],qt=q("layers",It);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],Vt=q("moon",Xt);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Yt=q("shield-check",Gt),Jt=[{id:"user1",name:"Rahul Sharma",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100",trustScore:92,currentStreak:12,matchesPlayed:45,badges:["High trust zone","Consistent player"]},{id:"user2",name:"Priya Singh",avatar:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=100",trustScore:88,currentStreak:8,matchesPlayed:32,badges:["Newbie-friendly","Team player"]},{id:"user3",name:"Amit Patel",avatar:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=100",trustScore:85,currentStreak:15,matchesPlayed:58,badges:["High trust zone","Veteran"]},{id:"user4",name:"Sneha Desai",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=100",trustScore:90,currentStreak:5,matchesPlayed:28,badges:["Friendly","Reliable"]},{id:"user5",name:"Karan Mehta",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100",trustScore:87,currentStreak:20,matchesPlayed:67,badges:["High trust zone","Consistent player"]},{id:"user6",name:"Vikram Reddy",avatar:"https://images.unsplash.com/photo-1463453091185-61582044d556?w=100",trustScore:83,currentStreak:3,matchesPlayed:19,badges:["Newbie-friendly"]},{id:"user7",name:"Neha Gupta",avatar:"https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=100",trustScore:91,currentStreak:10,matchesPlayed:41,badges:["High trust zone","Social"]},{id:"user8",name:"Arjun Kumar",avatar:"https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?w=100",trustScore:78,currentStreak:2,matchesPlayed:12,badges:["Learning"]},{id:"user9",name:"Divya Menon",avatar:"https://images.unsplash.com/photo-1517841905240-472988babdf9?w=100",trustScore:94,currentStreak:25,matchesPlayed:89,badges:["High trust zone","Legend","Consistent player"]},{id:"user10",name:"Rohan Joshi",avatar:"https://images.unsplash.com/photo-1519345182560-3f2917c472ef?w=100",trustScore:86,currentStreak:7,matchesPlayed:34,badges:["Reliable","Team player"]}],J=[{id:"match1",title:"Saturday Morning Football",sport:"Football",dateTime:new Date(Date.now()+2880*60*1e3),location:"Bandra Sports Complex",organizerId:"user1"},{id:"match2",title:"Sunday Cricket Match",sport:"Cricket",dateTime:new Date(Date.now()+4320*60*1e3),location:"Andheri Cricket Ground",organizerId:"user2"},{id:"match3",title:"Evening Badminton",sport:"Badminton",dateTime:new Date(Date.now()+1440*60*1e3),location:"Powai Sports Arena",organizerId:"user3"},{id:"match4",title:"Weekend Basketball",sport:"Basketball",dateTime:new Date(Date.now()+7200*60*1e3),location:"Malad Indoor Stadium",organizerId:"user4"},{id:"match5",title:"Friday Night Football",sport:"Football",dateTime:new Date(Date.now()+5760*60*1e3),location:"Juhu Turf",organizerId:"user5"}];class Qt{constructor(){V(this,"activities",[]);this.generateMockActivities()}generateMockActivities(){const s=Date.now(),t=[];Jt.forEach((a,i)=>{if(Math.random()>.3){const o=J[Math.floor(Math.random()*J.length)];t.push({id:`activity-${t.length}`,type:"match_join",userId:a.id,userName:a.name,userAvatar:a.avatar,timestamp:new Date(s-Math.random()*3*60*60*1e3),data:{matchId:o.id,matchTitle:o.title,sport:o.sport,dateTime:o.dateTime},read:Math.random()>.4})}if(Math.random()>.5){const o=["Week Warrior","Friend Maker","Regular Player","Always On Time","Memory Maker"],n=o[Math.floor(Math.random()*o.length)];t.push({id:`activity-${t.length}`,type:"achievement_unlock",userId:a.id,userName:a.name,userAvatar:a.avatar,timestamp:new Date(s-Math.random()*24*60*60*1e3),data:{achievementName:n,xpEarned:Math.floor(Math.random()*500)+100},read:Math.random()>.5})}if(Math.random()>.6&&a.trustScore>=85&&t.push({id:`activity-${t.length}`,type:"trust_increase",userId:a.id,userName:a.name,userAvatar:a.avatar,timestamp:new Date(s-Math.random()*12*60*60*1e3),data:{newScore:a.trustScore,increase:Math.floor(Math.random()*5)+1},read:Math.random()>.6}),a.currentStreak&&a.currentStreak>=7&&t.push({id:`activity-${t.length}`,type:"streak_milestone",userId:a.id,userName:a.name,userAvatar:a.avatar,timestamp:new Date(s-Math.random()*24*60*60*1e3),data:{streakDays:a.currentStreak},read:Math.random()>.5}),Math.random()>.4&&t.push({id:`activity-${t.length}`,type:"photo_upload",userId:a.id,userName:a.name,userAvatar:a.avatar,timestamp:new Date(s-Math.random()*6*60*60*1e3),data:{photoCount:Math.floor(Math.random()*3)+1,matchTitle:J[Math.floor(Math.random()*J.length)].title},read:Math.random()>.5}),Math.random()>.4){const o=J[Math.floor(Math.random()*J.length)];t.push({id:`activity-${t.length}`,type:"match_complete",userId:a.id,userName:a.name,userAvatar:a.avatar,timestamp:new Date(s-Math.random()*48*60*60*1e3),data:{matchTitle:o.title,sport:o.sport,rating:Math.floor(Math.random()*2)+4},read:Math.random()>.3})}if(Math.random()>.8){const o=["Weekend Warriors","The A-Team","Victory Squad","Thunder Strikers","Champions Club"];t.push({id:`activity-${t.length}`,type:"squad_create",userId:a.id,userName:a.name,userAvatar:a.avatar,timestamp:new Date(s-Math.random()*72*60*60*1e3),data:{squadName:o[Math.floor(Math.random()*o.length)]},read:Math.random()>.4})}}),this.activities=t.sort((a,i)=>i.timestamp.getTime()-a.timestamp.getTime())}getAllActivities(){return this.activities}getUserActivities(s){return this.activities.filter(t=>t.userId===s)}getRecentActivities(s=20){return this.activities.slice(0,s)}getUnreadActivities(){return this.activities.filter(s=>!s.read)}markAsRead(s){const t=this.activities.find(a=>a.id===s);t&&(t.read=!0)}markAllAsRead(){this.activities.forEach(s=>s.read=!0)}addActivity(s){const t=U(D({},s),{id:`activity-${Date.now()}-${Math.random()}`,timestamp:new Date,read:!1});return this.activities.unshift(t),t}getActivitiesByType(s){return this.activities.filter(t=>t.type===s)}getFriendActivities(s){return this.activities.filter(t=>s.includes(t.userId))}}const pe=new Qt;function P(r){const s=Object.prototype.toString.call(r);return r instanceof Date||typeof r=="object"&&s==="[object Date]"?new r.constructor(+r):typeof r=="number"||s==="[object Number]"||typeof r=="string"||s==="[object String]"?new Date(r):new Date(NaN)}function Kt(r,s){return r instanceof Date?new r.constructor(s):new Date(s)}const ne=43200,Le=1440;let Zt={};function es(){return Zt}function ze(r){const s=P(r),t=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return t.setUTCFullYear(s.getFullYear()),+r-+t}function de(r,s){const t=P(r),a=P(s),i=t.getTime()-a.getTime();return i<0?-1:i>0?1:i}function ts(r){return Kt(r,Date.now())}function ss(r,s){const t=P(r),a=P(s),i=t.getFullYear()-a.getFullYear(),o=t.getMonth()-a.getMonth();return i*12+o}function as(r){return s=>{const a=(r?Math[r]:Math.trunc)(s);return a===0?0:a}}function rs(r,s){return+P(r)-+P(s)}function is(r){const s=P(r);return s.setHours(23,59,59,999),s}function ls(r){const s=P(r),t=s.getMonth();return s.setFullYear(s.getFullYear(),t+1,0),s.setHours(23,59,59,999),s}function ns(r){const s=P(r);return+is(s)==+ls(s)}function cs(r,s){const t=P(r),a=P(s),i=de(t,a),o=Math.abs(ss(t,a));let n;if(o<1)n=0;else{t.getMonth()===1&&t.getDate()>27&&t.setDate(30),t.setMonth(t.getMonth()-i*o);let l=de(t,a)===-i;ns(P(r))&&o===1&&de(r,a)===1&&(l=!1),n=i*(o-Number(l))}return n===0?0:n}function os(r,s,t){const a=rs(r,s)/1e3;return as(t==null?void 0:t.roundingMethod)(a)}const ds={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ms=(r,s,t)=>{let a;const i=ds[r];return typeof i=="string"?a=i:s===1?a=i.one:a=i.other.replace("{{count}}",s.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+a:a+" ago":a};function ye(r){return(s={})=>{const t=s.width?String(s.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}const hs={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},xs={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},us={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ps={date:ye({formats:hs,defaultWidth:"full"}),time:ye({formats:xs,defaultWidth:"full"}),dateTime:ye({formats:us,defaultWidth:"full"})},fs={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},gs=(r,s,t,a)=>fs[r];function ae(r){return(s,t)=>{const a=t!=null&&t.context?String(t.context):"standalone";let i;if(a==="formatting"&&r.formattingValues){const n=r.defaultFormattingWidth||r.defaultWidth,l=t!=null&&t.width?String(t.width):n;i=r.formattingValues[l]||r.formattingValues[n]}else{const n=r.defaultWidth,l=t!=null&&t.width?String(t.width):r.defaultWidth;i=r.values[l]||r.values[n]}const o=r.argumentCallback?r.argumentCallback(s):s;return i[o]}}const bs={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},js={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ys={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},vs={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ws={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Ns={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ks=(r,s)=>{const t=Number(r),a=t%100;if(a>20||a<10)switch(a%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Ss={ordinalNumber:ks,era:ae({values:bs,defaultWidth:"wide"}),quarter:ae({values:js,defaultWidth:"wide",argumentCallback:r=>r-1}),month:ae({values:ys,defaultWidth:"wide"}),day:ae({values:vs,defaultWidth:"wide"}),dayPeriod:ae({values:ws,defaultWidth:"wide",formattingValues:Ns,defaultFormattingWidth:"wide"})};function re(r){return(s,t={})=>{const a=t.width,i=a&&r.matchPatterns[a]||r.matchPatterns[r.defaultMatchWidth],o=s.match(i);if(!o)return null;const n=o[0],l=a&&r.parsePatterns[a]||r.parsePatterns[r.defaultParseWidth],c=Array.isArray(l)?Cs(l,f=>f.test(n)):Ms(l,f=>f.test(n));let d;d=r.valueCallback?r.valueCallback(c):c,d=t.valueCallback?t.valueCallback(d):d;const m=s.slice(n.length);return{value:d,rest:m}}}function Ms(r,s){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&s(r[t]))return t}function Cs(r,s){for(let t=0;t<r.length;t++)if(s(r[t]))return t}function _s(r){return(s,t={})=>{const a=s.match(r.matchPattern);if(!a)return null;const i=a[0],o=s.match(r.parsePattern);if(!o)return null;let n=r.valueCallback?r.valueCallback(o[0]):o[0];n=t.valueCallback?t.valueCallback(n):n;const l=s.slice(i.length);return{value:n,rest:l}}}const Ps=/^(\d+)(th|st|nd|rd)?/i,As=/\d+/i,Ds={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Ts={any:[/^b/i,/^(a|c)/i]},$s={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Es={any:[/1/i,/2/i,/3/i,/4/i]},Us={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Fs={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Ws={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Ls={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},zs={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Rs={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Os={ordinalNumber:_s({matchPattern:Ps,parsePattern:As,valueCallback:r=>parseInt(r,10)}),era:re({matchPatterns:Ds,defaultMatchWidth:"wide",parsePatterns:Ts,defaultParseWidth:"any"}),quarter:re({matchPatterns:$s,defaultMatchWidth:"wide",parsePatterns:Es,defaultParseWidth:"any",valueCallback:r=>r+1}),month:re({matchPatterns:Us,defaultMatchWidth:"wide",parsePatterns:Fs,defaultParseWidth:"any"}),day:re({matchPatterns:Ws,defaultMatchWidth:"wide",parsePatterns:Ls,defaultParseWidth:"any"}),dayPeriod:re({matchPatterns:zs,defaultMatchWidth:"any",parsePatterns:Rs,defaultParseWidth:"any"})},Bs={code:"en-US",formatDistance:ms,formatLong:ps,formatRelative:gs,localize:Ss,match:Os,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Hs(r,s,t){var k,S;const a=es(),i=(S=(k=t==null?void 0:t.locale)!=null?k:a.locale)!=null?S:Bs,o=2520,n=de(r,s);if(isNaN(n))throw new RangeError("Invalid time value");const l=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:n});let c,d;n>0?(c=P(s),d=P(r)):(c=P(r),d=P(s));const m=os(d,c),f=(ze(d)-ze(c))/1e3,u=Math.round((m-f)/60);let j;if(u<2)return t!=null&&t.includeSeconds?m<5?i.formatDistance("lessThanXSeconds",5,l):m<10?i.formatDistance("lessThanXSeconds",10,l):m<20?i.formatDistance("lessThanXSeconds",20,l):m<40?i.formatDistance("halfAMinute",0,l):m<60?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",1,l):u===0?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",u,l);if(u<45)return i.formatDistance("xMinutes",u,l);if(u<90)return i.formatDistance("aboutXHours",1,l);if(u<Le){const y=Math.round(u/60);return i.formatDistance("aboutXHours",y,l)}else{if(u<o)return i.formatDistance("xDays",1,l);if(u<ne){const y=Math.round(u/Le);return i.formatDistance("xDays",y,l)}else if(u<ne*2)return j=Math.round(u/ne),i.formatDistance("aboutXMonths",j,l)}if(j=cs(d,c),j<12){const y=Math.round(u/ne);return i.formatDistance("xMonths",y,l)}else{const y=j%12,g=Math.trunc(j/12);return y<3?i.formatDistance("aboutXYears",g,l):y<9?i.formatDistance("overXYears",g,l):i.formatDistance("almostXYears",g+1,l)}}function et(r,s){return Hs(r,ts(r),s)}const tt=r=>{switch(r){case"match_join":return e.jsx(K,{className:"w-5 h-5"});case"match_complete":return e.jsx(he,{className:"w-5 h-5"});case"achievement_unlock":return e.jsx(z,{className:"w-5 h-5"});case"trust_increase":return e.jsx(H,{className:"w-5 h-5"});case"streak_milestone":return e.jsx(Z,{className:"w-5 h-5"});case"photo_upload":return e.jsx(vt,{className:"w-5 h-5"});case"mvp_won":return e.jsx(B,{className:"w-5 h-5"});case"squad_create":return e.jsx(xe,{className:"w-5 h-5"});case"payment_complete":return e.jsx(he,{className:"w-5 h-5"});default:return e.jsx(K,{className:"w-5 h-5"})}},Ce=r=>{switch(r){case"match_join":return"from-blue-500 to-cyan-500";case"match_complete":return"from-green-500 to-emerald-500";case"achievement_unlock":return"from-yellow-500 to-orange-500";case"trust_increase":return"from-green-500 to-teal-500";case"streak_milestone":return"from-orange-500 to-red-500";case"photo_upload":return"from-purple-500 to-pink-500";case"mvp_won":return"from-yellow-500 to-amber-500";case"squad_create":return"from-indigo-500 to-purple-500";case"payment_complete":return"from-teal-500 to-cyan-500";default:return"from-slate-500 to-slate-600"}};function Is({userId:r,limit:s=20,showUnreadOnly:t=!1}){const a=r?pe.getUserActivities(r):pe.getRecentActivities(s),i=t?a.filter(l=>!l.read):a,o=s?i.slice(0,s):i,n=l=>{switch(l.type){case"match_join":return e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-white",children:l.userName})," joined"," ",e.jsx("span",{className:"text-cyan-400",children:l.data.matchTitle})]});case"match_complete":return e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-white",children:l.userName})," completed"," ",e.jsx("span",{className:"text-green-400",children:l.data.matchTitle}),l.data.rating&&e.jsxs("span",{className:"text-yellow-400",children:[" â­ ",l.data.rating,"/5"]})]});case"achievement_unlock":return e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-white",children:l.userName})," unlocked"," ",e.jsx("span",{className:"text-yellow-400",children:l.data.achievementName}),l.data.xpEarned&&e.jsxs("span",{className:"text-purple-400",children:[" +",l.data.xpEarned," XP"]})]});case"trust_increase":return e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-white",children:l.userName}),"'s trust score increased to"," ",e.jsx("span",{className:"text-green-400",children:l.data.newScore})]});case"streak_milestone":return e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-white",children:l.userName})," reached"," ",e.jsxs("span",{className:"text-orange-400",children:[l.data.streakDays," day streak"]})," ðŸ”¥"]});case"photo_upload":return e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-white",children:l.userName})," uploaded"," ",l.data.photoCount," ",l.data.photoCount>1?"photos":"photo"," from"," ",e.jsx("span",{className:"text-purple-400",children:l.data.matchTitle})]});case"mvp_won":return e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-white",children:l.userName})," was voted"," ",e.jsx("span",{className:"text-yellow-400",children:"MVP"}),"! â­"]});case"squad_create":return e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-white",children:l.userName})," created squad"," ",e.jsx("span",{className:"text-indigo-400",children:l.data.squadName})]});case"payment_complete":return e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-white",children:l.userName})," confirmed payment for a match"]});default:return e.jsxs("span",{children:[l.userName," performed an action"]})}};return o.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(K,{className:"w-12 h-12 text-slate-600 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-400",children:"No activity yet"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Start connecting with your community!"})]}):e.jsx("div",{className:"space-y-3",children:e.jsx(ie,{mode:"popLayout",children:o.map((l,c)=>e.jsxs(x.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:c*.05},className:`relative group ${l.read?"opacity-70":""}`,children:[e.jsxs("div",{className:"flex gap-4 p-4 rounded-2xl bg-slate-800/40 hover:bg-slate-800/60 transition-all border border-slate-700/50",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden border-2 border-slate-700",children:e.jsx(Ve,{src:l.userAvatar,alt:l.userName,className:"w-full h-full object-cover"})}),e.jsx(x.div,{initial:{scale:0},animate:{scale:1},transition:{delay:c*.05+.1,type:"spring"},className:`absolute -bottom-1 -right-1 w-6 h-6 rounded-full bg-gradient-to-br ${Ce(l.type)} flex items-center justify-center text-white shadow-lg`,children:tt(l.type)})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-slate-300 text-sm leading-relaxed mb-1",children:n(l)}),e.jsx("p",{className:"text-slate-500 text-xs",children:et(l.timestamp,{addSuffix:!0})})]}),!l.read&&e.jsx(x.div,{initial:{scale:0},animate:{scale:1},className:"flex-shrink-0 w-2 h-2 bg-cyan-500 rounded-full self-center"})]}),e.jsx(x.div,{initial:{scaleX:0},whileHover:{scaleX:1},className:`absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r ${Ce(l.type)} origin-left`})]},l.id))})})}function qs({limit:r=5}){const s=pe.getRecentActivities(r);return e.jsx("div",{className:"space-y-2",children:s.map((t,a)=>e.jsxs(x.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:a*.05},className:"flex items-center gap-3 p-2 rounded-lg hover:bg-slate-800/40 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden flex-shrink-0",children:e.jsx(Ve,{src:t.userAvatar,alt:t.userName,className:"w-full h-full object-cover"})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("p",{className:"text-xs text-slate-400 truncate",children:[e.jsx("span",{className:"text-white",children:t.userName.split(" ")[0]})," ",t.type==="match_join"&&"joined a match",t.type==="achievement_unlock"&&"unlocked an achievement",t.type==="trust_increase"&&"leveled up"]})}),e.jsx("div",{className:`w-5 h-5 rounded-full bg-gradient-to-br ${Ce(t.type)} flex items-center justify-center flex-shrink-0`,children:tt(t.type)})]},t.id))})}function Xs({userId:r}){const[s,t]=p.useState("all"),a=T.getUserLevel(r),i=T.getUnlockedAchievements(r),o=T.getInProgressAchievements(r);T.getLockedAchievements(r);const n=s==="all"?T.getUserAchievements(r):T.getAchievementsByCategory(r,s),l=d=>{switch(d){case"common":return"from-slate-500 to-slate-600";case"rare":return"from-blue-500 to-cyan-500";case"epic":return"from-purple-500 to-pink-500";case"legendary":return"from-yellow-500 to-orange-500"}},c=d=>{switch(d){case"common":return"border-slate-500/30";case"rare":return"border-blue-500/30";case"epic":return"border-purple-500/30";case"legendary":return"border-yellow-500/30"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-purple-900/20 to-pink-900/20 rounded-3xl p-6 border border-purple-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-white mb-1",children:["Level ",a.level]}),e.jsx("p",{className:"text-purple-300",children:a.title})]}),e.jsx(x.div,{animate:{rotate:360},transition:{duration:20,repeat:1/0,ease:"linear"},className:"w-16 h-16 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center",children:e.jsx(B,{className:"w-8 h-8 text-white",fill:"white"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-slate-400",children:[a.currentXP," XP"]}),e.jsxs("span",{className:"text-slate-400",children:[a.xpToNextLevel," XP to Level ",a.level+1]})]}),e.jsx("div",{className:"h-3 bg-slate-800 rounded-full overflow-hidden",children:e.jsx(x.div,{initial:{width:0},animate:{width:`${a.currentXP/a.xpToNextLevel*100}%`},transition:{duration:1,ease:"easeOut"},className:"h-full bg-gradient-to-r from-purple-500 to-pink-500"})})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl text-white",children:i.length}),e.jsx("div",{className:"text-xs text-slate-400",children:"Unlocked"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl text-white",children:o.length}),e.jsx("div",{className:"text-xs text-slate-400",children:"In Progress"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl text-white",children:a.currentXP}),e.jsx("div",{className:"text-xs text-slate-400",children:"Current XP"})]})]})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:["all","consistency","social","trust","participation","special"].map(d=>e.jsx($,{onClick:()=>t(d),variant:s===d?"default":"outline",className:`flex-shrink-0 ${s===d?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"bg-slate-800 text-slate-300 hover:bg-slate-700"}`,children:d.charAt(0).toUpperCase()+d.slice(1)},d))}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:n.map((d,m)=>{var f;return e.jsxs(x.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:m*.05},whileHover:{scale:1.02},className:`relative rounded-2xl p-5 border-2 ${c(d.rarity)} ${d.unlocked?`bg-gradient-to-br ${l(d.rarity)}/20`:"bg-slate-800/40 grayscale"}`,children:[!d.unlocked&&e.jsx("div",{className:"absolute inset-0 bg-slate-900/60 rounded-2xl flex items-center justify-center backdrop-blur-sm",children:e.jsx(Se,{className:"w-8 h-8 text-slate-500"})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:`text-4xl flex-shrink-0 ${d.unlocked?"":"opacity-30"}`,children:d.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-white mb-1",children:d.title}),e.jsx("p",{className:"text-slate-400 text-sm",children:d.description})]}),d.unlocked&&e.jsx(x.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},className:"flex-shrink-0",children:e.jsx(z,{className:"w-5 h-5 text-yellow-500"})})]}),!d.unlocked&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-slate-500",children:"Progress"}),e.jsxs("span",{className:"text-slate-400",children:[d.progress," / ",d.maxProgress]})]}),e.jsx("div",{className:"h-2 bg-slate-700 rounded-full overflow-hidden",children:e.jsx(x.div,{initial:{width:0},animate:{width:`${d.progress/d.maxProgress*100}%`},className:`h-full bg-gradient-to-r ${l(d.rarity)}`})})]}),d.unlocked&&d.unlockedDate&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-slate-400",children:[e.jsx(B,{className:"w-3 h-3"}),e.jsxs("span",{children:["Unlocked ",new Date(d.unlockedDate).toLocaleDateString()]}),e.jsxs("span",{className:"text-yellow-400",children:["+",((f=d.reward)==null?void 0:f.xp)||0," XP"]})]}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:`text-xs px-2 py-1 rounded-full bg-gradient-to-r ${l(d.rarity)} text-white`,children:d.rarity.charAt(0).toUpperCase()+d.rarity.slice(1)})})]})]}),d.unlocked&&e.jsx(x.div,{animate:{x:["-100%","200%"]},transition:{duration:3,repeat:1/0,repeatDelay:5,ease:"easeInOut"},className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent pointer-events-none",style:{transform:"skewX(-20deg)"}})]},d.id)})}),n.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(z,{className:"w-12 h-12 text-slate-600 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-400",children:"No achievements in this category"})]})]})}function Vs({trigger:r,onComplete:s}){const[t,a]=p.useState([]);return p.useEffect(()=>{if(r){const i=Array.from({length:50},(o,n)=>({id:n,x:Math.random()*window.innerWidth,y:-20,color:["#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8","#F7DC6F","#BB8FCE","#85C1E2"][Math.floor(Math.random()*8)],rotation:Math.random()*360,delay:Math.random()*.3}));a(i),setTimeout(()=>{a([]),s==null||s()},3e3)}},[r,s]),t.length===0?null:e.jsx("div",{className:"fixed inset-0 pointer-events-none z-[100]",children:t.map(i=>e.jsx(x.div,{initial:{x:i.x,y:i.y,rotate:i.rotation,opacity:1,scale:1},animate:{y:window.innerHeight+100,rotate:i.rotation+720,opacity:0,scale:.5},transition:{duration:2.5,delay:i.delay,ease:[.23,1,.32,1]},style:{position:"absolute",width:"10px",height:"10px",backgroundColor:i.color,borderRadius:Math.random()>.5?"50%":"2px"}},i.id))})}function Gs({userId:r,onClose:s}){var M,W;const[t,a]=p.useState("achievements"),[i,o]=p.useState([]),[n,l]=p.useState([]),[c,d]=p.useState([]),[m,f]=p.useState(null),[u,j]=p.useState(null),[k,S]=p.useState(!1);p.useEffect(()=>{y()},[r]);const y=()=>{o(T.getAchievements(r)),l(T.getQuests(r)),d(T.getAvatarFrames(r)),f(T.getUserLevel(r))},g=h=>{switch(h){case"common":return"from-slate-400 to-slate-600";case"rare":return"from-blue-400 to-blue-600";case"epic":return"from-purple-400 to-purple-600";case"legendary":return"from-yellow-400 to-orange-600";default:return"from-slate-400 to-slate-600"}},w=h=>{switch(h){case"common":return"shadow-slate-500/50";case"rare":return"shadow-blue-500/50";case"epic":return"shadow-purple-500/50";case"legendary":return"shadow-yellow-500/50";default:return"shadow-slate-500/50"}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-950 via-pink-950 to-orange-950 p-6 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx(x.div,{className:"absolute top-20 left-20 w-64 h-64 bg-purple-500/10 rounded-full blur-3xl",animate:{scale:[1,1.2,1],x:[0,50,0],y:[0,30,0]},transition:{duration:8,repeat:1/0}}),e.jsx(x.div,{className:"absolute bottom-20 right-20 w-96 h-96 bg-pink-500/10 rounded-full blur-3xl",animate:{scale:[1.2,1,1.2],x:[0,-30,0],y:[0,-50,0]},transition:{duration:10,repeat:1/0}}),e.jsx(x.div,{className:"absolute top-1/2 left-1/2 w-80 h-80 bg-orange-500/10 rounded-full blur-3xl",animate:{scale:[1,1.3,1],rotate:[0,180,360]},transition:{duration:15,repeat:1/0}})]}),e.jsx(Vs,{trigger:k,onComplete:()=>S(!1)}),e.jsxs("div",{className:"max-w-6xl mx-auto relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:s,className:"p-2 hover:bg-white/10 rounded-lg transition-colors text-white",children:"â†"}),e.jsx("h1",{className:"bg-gradient-to-r from-purple-400 via-pink-400 to-orange-400 bg-clip-text text-transparent",children:"Achievements & Progress"})]}),m&&e.jsx(x.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-xl rounded-2xl p-4 shadow-lg border border-white/20",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`w-16 h-16 rounded-full bg-gradient-to-br ${g("epic")} flex items-center justify-center`,children:e.jsx("span",{className:"text-white text-xl",children:m.level})}),e.jsx(x.div,{animate:{rotate:360},transition:{duration:3,repeat:1/0,ease:"linear"},className:"absolute inset-0 rounded-full border-2 border-purple-400 border-t-transparent"})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-slate-600",children:["Level ",m.level]}),e.jsx("p",{className:"font-medium",children:m.title}),e.jsx("div",{className:"w-32 h-2 bg-slate-200 rounded-full mt-1 overflow-hidden",children:e.jsx(x.div,{initial:{width:0},animate:{width:`${m.currentXP/m.xpToNextLevel*100}%`},className:"h-full bg-gradient-to-r from-purple-500 to-pink-500"})}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[m.currentXP," / ",m.xpToNextLevel," XP"]})]})]})})]}),e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsx("button",{onClick:()=>a("achievements"),className:`flex-1 py-3 px-6 rounded-xl transition-all ${t==="achievements"?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-lg shadow-purple-500/50":"bg-white/10 hover:bg-white/20 text-white backdrop-blur-md border border-white/20"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(z,{className:"w-5 h-5"}),e.jsx("span",{children:"Achievements"})]})}),e.jsx("button",{onClick:()=>a("quests"),className:`flex-1 py-3 px-6 rounded-xl transition-all ${t==="quests"?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-lg shadow-purple-500/50":"bg-white/10 hover:bg-white/20 text-white backdrop-blur-md border border-white/20"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Qe,{className:"w-5 h-5"}),e.jsx("span",{children:"Quests"})]})}),e.jsx("button",{onClick:()=>a("frames"),className:`flex-1 py-3 px-6 rounded-xl transition-all ${t==="frames"?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-lg shadow-purple-500/50":"bg-white/10 hover:bg-white/20 text-white backdrop-blur-md border border-white/20"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(ee,{className:"w-5 h-5"}),e.jsx("span",{children:"Frames & Badges"})]})})]}),t==="achievements"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map((h,_)=>{var E;return e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:_*.05},whileHover:{scale:1.03,y:-5},onClick:()=>j(h),className:"cursor-pointer",children:e.jsxs("div",{className:`bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all relative overflow-hidden ${h.unlocked?w(h.rarity):""}`,children:[e.jsx("div",{className:`absolute top-0 left-0 right-0 h-1 bg-gradient-to-r ${g(h.rarity)}`}),!h.unlocked&&e.jsx("div",{className:"absolute inset-0 bg-slate-900/10 backdrop-blur-[1px] flex items-center justify-center",children:e.jsx(Se,{className:"w-12 h-12 text-slate-400"})}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:`text-4xl ${h.unlocked?"":"grayscale opacity-50"}`,children:h.icon}),e.jsxs("div",{className:"flex items-center gap-1 text-xs bg-slate-100 px-2 py-1 rounded-full",children:[e.jsx(R,{className:"w-3 h-3 text-yellow-500"}),e.jsxs("span",{children:[((E=h.reward)==null?void 0:E.xp)||0," XP"]})]})]}),e.jsx("h3",{className:`mb-2 ${h.unlocked?"":"text-slate-400"}`,children:h.title}),e.jsx("p",{className:"text-sm text-slate-600 mb-3",children:h.description}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[h.progress," / ",h.maxProgress]})]}),e.jsx("div",{className:"w-full h-2 bg-slate-200 rounded-full overflow-hidden",children:e.jsx(x.div,{initial:{width:0},animate:{width:`${h.progress/h.maxProgress*100}%`},className:`h-full bg-gradient-to-r ${g(h.rarity)}`})})]}),e.jsx("div",{className:"mt-3 inline-block",children:e.jsx("span",{className:`text-xs px-2 py-1 rounded-full bg-gradient-to-r ${g(h.rarity)} text-white`,children:h.rarity.toUpperCase()})})]})]})},h.id)})}),t==="quests"&&e.jsx("div",{className:"space-y-4",children:n.map((h,_)=>e.jsx(x.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:_*.1},className:`bg-white rounded-2xl p-6 shadow-lg ${h.completed?"border-2 border-green-500":""}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:`px-3 py-1 rounded-full text-sm ${h.type==="daily"?"bg-blue-100 text-blue-600":h.type==="weekly"?"bg-purple-100 text-purple-600":"bg-orange-100 text-orange-600"}`,children:h.type.toUpperCase()}),h.completed&&e.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[e.jsx(R,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Completed!"})]})]}),e.jsx("h3",{className:"mb-2",children:h.title}),e.jsx("p",{className:"text-sm text-slate-600 mb-4",children:h.description}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Progress"}),e.jsxs("span",{className:"font-medium",children:[h.progress," / ",h.maxProgress]})]}),e.jsx("div",{className:"w-full h-3 bg-slate-200 rounded-full overflow-hidden",children:e.jsx(x.div,{initial:{width:0},animate:{width:`${h.progress/h.maxProgress*100}%`},className:"h-full bg-gradient-to-r from-cyan-500 to-blue-500"})})]}),e.jsxs("p",{className:"text-xs text-slate-500 mt-2",children:["Expires: ",new Date(h.expiresAt).toLocaleDateString()]})]}),e.jsx("div",{className:"ml-4 text-right",children:e.jsx("div",{className:"bg-yellow-100 rounded-xl p-3 inline-block",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5 text-yellow-600"}),e.jsxs("span",{className:"font-medium text-yellow-700",children:[h.reward.xp," XP"]})]})})})]})},h.id))}),t==="frames"&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:c.map((h,_)=>e.jsx(x.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:_*.05},whileHover:{scale:1.05},className:"cursor-pointer",children:e.jsxs("div",{className:`bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all relative ${h.unlocked?w(h.rarity):""}`,children:[!h.unlocked&&e.jsx("div",{className:"absolute inset-0 bg-slate-900/10 backdrop-blur-[1px] flex items-center justify-center rounded-2xl",children:e.jsx(Se,{className:"w-8 h-8 text-slate-400"})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"mb-4 mx-auto w-24 h-24 relative",children:e.jsx("div",{className:`absolute inset-0 rounded-full bg-gradient-to-br ${h.gradient} p-1 ${h.unlocked?"":"grayscale opacity-50"}`,children:e.jsx("div",{className:"w-full h-full rounded-full bg-slate-200 flex items-center justify-center",children:e.jsx(B,{className:"w-8 h-8 text-slate-400"})})})}),e.jsx("h4",{className:`text-center mb-2 ${h.unlocked?"":"text-slate-400"}`,children:h.name}),e.jsx("p",{className:"text-xs text-center text-slate-600 mb-3",children:h.description}),e.jsx("div",{className:"text-center",children:e.jsx("span",{className:`text-xs px-2 py-1 rounded-full bg-gradient-to-r ${g(h.rarity)} text-white`,children:h.rarity.toUpperCase()})}),!h.unlocked&&e.jsx("p",{className:"text-xs text-center text-slate-500 mt-3",children:h.requirement})]})]})},h.id))})]}),e.jsx(ie,{children:u&&e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>j(null),className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsx(x.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},onClick:h=>h.stopPropagation(),className:"bg-white rounded-3xl p-8 max-w-md w-full shadow-2xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:u.icon}),e.jsx("h2",{className:"mb-3",children:u.title}),e.jsx("p",{className:"text-slate-600 mb-6",children:u.description}),e.jsxs("div",{className:"bg-slate-50 rounded-2xl p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-slate-600",children:"Progress"}),e.jsxs("span",{className:"font-medium",children:[u.progress," / ",u.maxProgress]})]}),e.jsx("div",{className:"w-full h-3 bg-slate-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full bg-gradient-to-r ${g(u.rarity)}`,style:{width:`${u.progress/u.maxProgress*100}%`}})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 rounded-2xl p-4 mb-6",children:[e.jsx("p",{className:"text-sm text-slate-600 mb-2",children:"Rewards"}),e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5 text-yellow-600"}),e.jsxs("span",{className:"font-medium",children:[((M=u.reward)==null?void 0:M.xp)||0," XP"]})]}),((W=u.reward)==null?void 0:W.badge)&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"w-5 h-5 text-purple-600"}),e.jsx("span",{children:u.reward.badge})]})]})]}),e.jsx($,{onClick:()=>j(null),className:"w-full",children:"Close"})]})})})})]})}class Ys{constructor(){V(this,"wallets",new Map);this.initializeMockWallets()}initializeMockWallets(){["user1","user2","user3","user4","user5"].forEach(t=>{const a=this.generateMockTransactions(t),i=a.filter(c=>c.type==="credit"||c.type==="cashback"||c.type==="referral_bonus"||c.type==="refund").reduce((c,d)=>c+d.amount,0),o=a.filter(c=>c.type==="debit").reduce((c,d)=>c+d.amount,0),n=a.filter(c=>c.type==="cashback").reduce((c,d)=>c+d.amount,0),l=a.filter(c=>c.type==="referral_bonus").reduce((c,d)=>c+d.amount,0);this.wallets.set(t,{userId:t,balance:i-o,totalCredits:i,totalDebits:o,cashbackEarned:n,referralBonuses:l,transactions:a.sort((c,d)=>d.timestamp.getTime()-c.timestamp.getTime())})})}generateMockTransactions(s){const t=[],a=Date.now();t.push({id:`txn-${t.length}`,type:"credit",amount:500,description:"Welcome bonus",timestamp:new Date(a-720*60*60*1e3),status:"completed"});for(let i=0;i<15;i++){const o=Math.random()*30;if(Math.random()>.4)t.push({id:`txn-${t.length}`,type:"debit",amount:Math.floor(Math.random()*300)+100,description:"Match payment",timestamp:new Date(a-o*24*60*60*1e3),status:"completed",relatedMatchId:`match-${i}`,relatedMatchTitle:`Football Match #${i+1}`}),Math.random()>.7&&t.push({id:`txn-${t.length}`,type:"cashback",amount:Math.floor(Math.random()*30)+10,description:"Cashback on match payment",timestamp:new Date(a-(o-.1)*24*60*60*1e3),status:"completed"});else{const l=["credit","refund","referral_bonus"],c=l[Math.floor(Math.random()*l.length)];let d="",m=0;switch(c){case"credit":m=[100,200,500,1e3][Math.floor(Math.random()*4)],d=`Added â‚¹${m} to wallet`;break;case"refund":m=Math.floor(Math.random()*200)+50,d="Match cancellation refund";break;case"referral_bonus":m=100,d="Referral bonus";break}t.push({id:`txn-${t.length}`,type:c,amount:m,description:d,timestamp:new Date(a-o*24*60*60*1e3),status:"completed"})}}return t}getWallet(s){return this.wallets.get(s)||null}getBalance(s){var t;return((t=this.wallets.get(s))==null?void 0:t.balance)||0}addCredit(s,t,a){const i=this.wallets.get(s);if(!i)throw new Error("Wallet not found");const o={id:`txn-${Date.now()}-${Math.random()}`,type:"credit",amount:t,description:a,timestamp:new Date,status:"completed"};return i.transactions.unshift(o),i.balance+=t,i.totalCredits+=t,o}deductAmount(s,t,a,i,o){const n=this.wallets.get(s);if(!n)throw new Error("Wallet not found");if(n.balance<t)throw new Error("Insufficient balance");const l={id:`txn-${Date.now()}-${Math.random()}`,type:"debit",amount:t,description:a,timestamp:new Date,status:"completed",relatedMatchId:i,relatedMatchTitle:o};if(n.transactions.unshift(l),n.balance-=t,n.totalDebits+=t,Math.random()>.5){const c=Math.floor(t*.1);this.addCashback(s,c,`Cashback on ${a}`)}return l}addCashback(s,t,a){const i=this.wallets.get(s);if(!i)throw new Error("Wallet not found");const o={id:`txn-${Date.now()}-${Math.random()}`,type:"cashback",amount:t,description:a,timestamp:new Date,status:"completed"};return i.transactions.unshift(o),i.balance+=t,i.cashbackEarned+=t,i.totalCredits+=t,o}addReferralBonus(s){const t=this.wallets.get(s);if(!t)throw new Error("Wallet not found");const a=100,i={id:`txn-${Date.now()}-${Math.random()}`,type:"referral_bonus",amount:a,description:"Referral bonus - Friend joined Avento!",timestamp:new Date,status:"completed"};return t.transactions.unshift(i),t.balance+=a,t.referralBonuses+=a,t.totalCredits+=a,i}getTransactionHistory(s,t){const a=this.wallets.get(s);return a?t?a.transactions.slice(0,t):a.transactions:[]}getTransactionsByType(s,t){const a=this.wallets.get(s);return a?a.transactions.filter(i=>i.type===t):[]}getMonthlySpending(s){const t=this.wallets.get(s);if(!t)return[];const a=new Map;return t.transactions.filter(i=>i.type==="debit").forEach(i=>{const o=i.timestamp.toLocaleString("default",{month:"short",year:"numeric"}),n=a.get(o)||0;a.set(o,n+i.amount)}),Array.from(a.entries()).map(([i,o])=>({month:i,amount:o})).sort((i,o)=>{const n=new Date(i.month);return new Date(o.month).getTime()-n.getTime()}).slice(0,6)}}const me=new Ys;function Js({userId:r}){const s=me.getWallet(r),[t,a]=p.useState(!1);if(!s)return e.jsx("div",{className:"text-center text-slate-400",children:"Wallet not found"});const i=me.getMonthlySpending(r),o=n=>{me.addCredit(r,n,`Added â‚¹${n} to wallet`),a(!1)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-green-900/20 to-emerald-900/20 rounded-3xl p-6 border border-green-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-sm mb-1",children:"Available Balance"}),e.jsxs(x.h2,{initial:{scale:.5},animate:{scale:1},className:"text-white",children:["â‚¹",s.balance.toLocaleString()]})]}),e.jsx(x.div,{whileHover:{rotate:360},transition:{duration:.6},className:"w-16 h-16 rounded-full bg-gradient-to-br from-green-500 to-emerald-500 flex items-center justify-center",children:e.jsx(Me,{className:"w-8 h-8 text-white"})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg text-green-400",children:["â‚¹",s.cashbackEarned]}),e.jsx("div",{className:"text-xs text-slate-400",children:"Cashback"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg text-purple-400",children:["â‚¹",s.referralBonuses]}),e.jsx("div",{className:"text-xs text-slate-400",children:"Referrals"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg text-blue-400",children:["â‚¹",s.totalCredits]}),e.jsx("div",{className:"text-xs text-slate-400",children:"Total Added"})]})]}),e.jsxs($,{onClick:()=>a(!t),className:"w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white",children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Add Money"]}),t&&e.jsx(x.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-4 grid grid-cols-4 gap-2",children:[100,200,500,1e3].map(n=>e.jsxs($,{onClick:()=>o(n),variant:"outline",className:"bg-slate-800 hover:bg-slate-700 text-white border-green-500/30",children:["â‚¹",n]},n))})]}),i.length>0&&e.jsxs("div",{className:"bg-slate-800/40 rounded-2xl p-6 border border-slate-700/50",children:[e.jsxs("h3",{className:"text-white mb-4 flex items-center gap-2",children:[e.jsx(H,{className:"w-5 h-5"}),"Monthly Spending"]}),e.jsx("div",{className:"space-y-3",children:i.map((n,l)=>{const c=Math.max(...i.map(m=>m.amount)),d=n.amount/c*100;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-slate-400",children:n.month}),e.jsxs("span",{className:"text-white",children:["â‚¹",n.amount]})]}),e.jsx("div",{className:"h-2 bg-slate-700 rounded-full overflow-hidden",children:e.jsx(x.div,{initial:{width:0},animate:{width:`${d}%`},transition:{delay:l*.1},className:"h-full bg-gradient-to-r from-blue-500 to-cyan-500"})})]},l)})})]}),e.jsxs("div",{className:"bg-slate-800/40 rounded-2xl p-6 border border-slate-700/50",children:[e.jsx("h3",{className:"text-white mb-4",children:"Recent Transactions"}),e.jsx("div",{className:"space-y-3",children:s.transactions.slice(0,10).map((n,l)=>{const c=n.type==="credit"||n.type==="cashback"||n.type==="referral_bonus"||n.type==="refund";return e.jsxs(x.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:l*.05},className:"flex items-center gap-4 p-3 rounded-xl bg-slate-900/40 hover:bg-slate-900/60 transition-colors",children:[e.jsxs("div",{className:`w-10 h-10 rounded-full ${c?"bg-green-500/20":"bg-red-500/20"} flex items-center justify-center flex-shrink-0`,children:[n.type==="credit"&&e.jsx(Ee,{className:"w-5 h-5 text-green-400"}),n.type==="debit"&&e.jsx(Lt,{className:"w-5 h-5 text-red-400"}),n.type==="cashback"&&e.jsx(Ue,{className:"w-5 h-5 text-purple-400"}),n.type==="refund"&&e.jsx(ft,{className:"w-5 h-5 text-blue-400"}),n.type==="referral_bonus"&&e.jsx(Ue,{className:"w-5 h-5 text-yellow-400"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-white text-sm truncate",children:n.description}),e.jsx("p",{className:"text-slate-500 text-xs",children:et(n.timestamp,{addSuffix:!0})})]}),e.jsxs("div",{className:`text-right flex-shrink-0 ${c?"text-green-400":"text-red-400"}`,children:[e.jsxs("div",{className:"text-sm",children:[c?"+":"-","â‚¹",n.amount]}),n.status==="pending"&&e.jsx("div",{className:"text-xs text-yellow-500",children:"Pending"})]})]},n.id)})})]})]})}const Qs="https://kouywbotopkrgxyjqylb.supabase.co",Ks="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtvdXl3Ym90b3Brcmd4eWpxeWxiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMxNDQ4NDEsImV4cCI6MjA3ODcyMDg0MX0.TTdjDQIj8mLiXm5Y_edtqkm4L17Z4jh6Aa9w92vAYoI",Re=wt(Qs,Ks);class Zs{constructor(){V(this,"cache",new Map);V(this,"allUsersCache",null);V(this,"cacheExpiry",300*1e3)}getUserById(s){return v(this,null,function*(){try{if(this.cache.has(s))return this.cache.get(s);const{data:t,error:a}=yield Re.from("profiles").select("id, name, avatar").eq("id",s).single();if(!a&&t){const i=yield this.enrichUserWithTrustScore(t);return this.cache.set(s,i),i}return console.log("Using mock data for user:",s),this.getMockUserById(s)}catch(t){return console.warn("Error fetching user, using mock data:",t),this.getMockUserById(s)}})}getMockUserById(s){const t=De.getUserById(s);if(!t)return;const a=je.getTrustScore(s),i=(a==null?void 0:a.overall)||75,o=[];return i>=90&&o.push("High trust zone"),i>=80&&o.push("Reliable player"),i>=75&&o.push("Newbie-friendly"),a&&a.completedMatches>=10&&o.push("Experienced"),U(D({},t),{trustScore:i,badges:o})}getAllUsers(){return v(this,null,function*(){try{if(this.allUsersCache)return this.allUsersCache;const{data:s,error:t}=yield Re.from("profiles").select("id, name, avatar").limit(50);if(!t&&s&&s.length>0){const a=yield Promise.all(s.map(i=>this.enrichUserWithTrustScore(i)));return this.allUsersCache=a,setTimeout(()=>{this.allUsersCache=null},this.cacheExpiry),a}return console.log("Using mock data for all users"),this.getAllMockUsers()}catch(s){return console.warn("Error fetching users, using mock data:",s),this.getAllMockUsers()}})}getAllMockUsers(){return De.getAllMockUsers().map(s=>{var t;return U(D({},s),{trustScore:((t=je.getTrustScore(s.id))==null?void 0:t.overall)||75})})}searchUsers(s){return v(this,null,function*(){const t=yield this.getAllUsers(),a=s.toLowerCase();return t.filter(i=>i.name.toLowerCase().includes(a))})}enrichUserWithTrustScore(s){return v(this,null,function*(){const t=je.getTrustScore(s.id),a=(t==null?void 0:t.overall)||75,i=[];return a>=90&&i.push("High trust zone"),a>=80&&i.push("Reliable player"),a>=75&&i.push("Newbie-friendly"),t&&t.completedMatches>=10&&i.push("Experienced"),{id:s.id,name:s.name,avatar:s.avatar||"ðŸ‘¤",trustScore:a,badges:i}})}clearCache(){this.cache.clear(),this.allUsersCache=null}}const _e=new Zs;function ea({userId:r}){const s=_e.getUserById(r);if(!s)return e.jsx("div",{className:"text-center text-slate-400",children:"User not found"});const t=s.trustScore||75,a=Math.min(95,t+Math.floor(Math.random()*10)),i=Math.min(93,t-Math.floor(Math.random()*5)),o=Math.min(90,t-Math.floor(Math.random()*8)),n=[{name:"Reliability",score:a,weight:40,icon:he,color:"from-green-500 to-emerald-500",description:"Showing up on time, honoring commitments",tips:["Always arrive on time for matches","Confirm attendance early","Update status if plans change"]},{name:"Respect",score:i,weight:35,icon:I,color:"from-pink-500 to-rose-500",description:"Positive interactions, sportsmanship",tips:["Be friendly and encouraging","Respect all skill levels","Give constructive feedback"]},{name:"Consistency",score:o,weight:25,icon:H,color:"from-blue-500 to-cyan-500",description:"Regular participation, building relationships",tips:["Play regularly to build streaks","Engage with community","Share post-match reflections"]}],c=(d=>d>=95?{level:"Exceptional",color:"text-yellow-400"}:d>=90?{level:"Excellent",color:"text-green-400"}:d>=80?{level:"Good",color:"text-blue-400"}:d>=70?{level:"Fair",color:"text-orange-400"}:{level:"Needs Improvement",color:"text-red-400"})(t);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(x.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-gradient-to-br from-green-900/20 to-emerald-900/20 rounded-3xl p-8 border border-green-500/20 text-center",children:[e.jsx(x.div,{animate:{rotate:360},transition:{duration:20,repeat:1/0,ease:"linear"},className:"w-24 h-24 mx-auto mb-4 rounded-full bg-gradient-to-br from-green-500 to-emerald-500 flex items-center justify-center",children:e.jsx("div",{className:"w-20 h-20 bg-slate-900 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-3xl text-white",children:s.trustScore})})}),e.jsx("h3",{className:"text-white mb-1",children:"Trust Score"}),e.jsx("p",{className:`mb-4 ${c.color}`,children:c.level}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-slate-400",children:[e.jsx(H,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{children:"+3 points this week"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-white flex items-center gap-2",children:[e.jsx(xe,{className:"w-5 h-5"}),"Score Breakdown"]}),n.map((d,m)=>e.jsx(x.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:m*.1},className:"bg-slate-800/40 rounded-2xl p-5 border border-slate-700/50",children:e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${d.color} flex items-center justify-center flex-shrink-0`,children:e.jsx(d.icon,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h4",{className:"text-white",children:d.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-white text-lg",children:d.score}),e.jsx("span",{className:"text-slate-500 text-sm",children:"/ 100"})]})]}),e.jsx("p",{className:"text-slate-400 text-sm mb-3",children:d.description}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"flex justify-between text-xs text-slate-500 mb-1",children:e.jsxs("span",{children:["Weight: ",d.weight,"%"]})}),e.jsx("div",{className:"h-2 bg-slate-700 rounded-full overflow-hidden",children:e.jsx(x.div,{initial:{width:0},animate:{width:`${d.score}%`},transition:{delay:m*.1+.2,duration:.8},className:`h-full bg-gradient-to-r ${d.color}`})})]}),e.jsxs("details",{className:"group",children:[e.jsx("summary",{className:"text-sm text-cyan-400 cursor-pointer hover:text-cyan-300",children:"How to improve â†’"}),e.jsx("ul",{className:"mt-2 space-y-1 text-sm text-slate-400",children:d.tips.map((f,u)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(B,{className:"w-3 h-3 mt-0.5 flex-shrink-0 text-yellow-500"}),e.jsx("span",{children:f})]},u))})]})]})]})},d.name))]}),e.jsxs("div",{className:"bg-slate-800/40 rounded-2xl p-5 border border-slate-700/50",children:[e.jsx("h3",{className:"text-white mb-4",children:"Your Badges"}),s.badges&&s.badges.length>0?e.jsx("div",{className:"grid grid-cols-2 gap-3",children:s.badges.map((d,m)=>e.jsxs(x.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:m*.1},whileHover:{scale:1.05},className:"bg-gradient-to-br from-purple-900/20 to-pink-900/20 rounded-xl p-4 border border-purple-500/20 text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:d==="High trust zone"?"ðŸ›¡ï¸":d==="Newbie-friendly"?"ðŸŒŸ":d==="Experienced"?"âš¡":"âœ¨"}),e.jsx("div",{className:"text-sm text-white",children:d})]},m))}):e.jsx("div",{className:"text-center text-slate-400 py-6",children:e.jsx("p",{children:"Keep playing to earn badges!"})})]}),e.jsxs("div",{className:"bg-slate-800/40 rounded-2xl p-5 border border-slate-700/50",children:[e.jsx("h3",{className:"text-white mb-4",children:"Community Comparison"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-slate-400",children:"Your Score"}),e.jsx("span",{className:"text-green-400",children:s.trustScore})]}),e.jsx("div",{className:"h-2 bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-emerald-500",style:{width:`${s.trustScore}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-slate-400",children:"Community Average"}),e.jsx("span",{className:"text-blue-400",children:"78"})]}),e.jsx("div",{className:"h-2 bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-cyan-500",style:{width:"78%"}})})]}),e.jsx("div",{className:"mt-4 p-4 bg-green-500/10 rounded-xl border border-green-500/20",children:e.jsx("p",{className:"text-green-400 text-sm text-center",children:"You're in the top 15% of the community! ðŸŽ‰"})})]})]})]})}function ta({userId:r}){const[s,t]=p.useState(Y.getPreferences(r)),a=(c,d)=>{const m=Y.updateCategoryPreferences(r,c,{enabled:d});t(m)},i=(c,d,m)=>{const f=Y.updateCategoryPreferences(r,c,{[d]:m});t(f)},o=()=>{if(s.quietHours.enabled){const c=Y.disableQuietHours(r);t(c)}else{const c=Y.enableQuietHours(r,"22:00","08:00");t(c)}},n=()=>{const c=Y.toggleMatchDayOnly(r);t(c)},l=[{key:"matchUpdates",title:"Match Updates",description:"Player joins, payment reminders, match confirmations",icon:ke,color:"from-blue-500 to-cyan-500"},{key:"friendActivity",title:"Friend Activity",description:"When friends join matches or achieve milestones",icon:L,color:"from-purple-500 to-pink-500"},{key:"achievements",title:"Achievements",description:"Badge unlocks, level ups, streak milestones",icon:L,color:"from-yellow-500 to-orange-500"},{key:"paymentReminders",title:"Payment Reminders",description:"Payment windows, deadlines, confirmations",icon:L,color:"from-green-500 to-emerald-500"},{key:"communityUpdates",title:"Community Updates",description:"Local events, announcements, new posts",icon:L,color:"from-indigo-500 to-purple-500"},{key:"promotions",title:"Promotions & Offers",description:"Special deals, cashback offers, referral bonuses",icon:L,color:"from-pink-500 to-rose-500"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-purple-900/20 to-pink-900/20 rounded-2xl p-6 border border-purple-500/20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(L,{className:"w-6 h-6 text-purple-400"}),e.jsx("h2",{className:"text-white",children:"Notification Preferences"})]}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Customize how and when you receive notifications"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(x.div,{whileTap:{scale:.98},onClick:o,className:`p-5 rounded-2xl border cursor-pointer transition-all ${s.quietHours.enabled?"bg-purple-900/20 border-purple-500/30":"bg-slate-800/40 border-slate-700/50"}`,children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${s.quietHours.enabled?"bg-gradient-to-br from-purple-500 to-pink-500":"bg-slate-700"}`,children:e.jsx(Vt,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-white",children:"Quiet Hours"}),e.jsx("p",{className:"text-sm text-slate-400",children:s.quietHours.enabled?`${s.quietHours.startTime} - ${s.quietHours.endTime}`:"Disabled"})]}),e.jsx("div",{className:`w-12 h-6 rounded-full transition-colors ${s.quietHours.enabled?"bg-purple-500":"bg-slate-600"}`,children:e.jsx(x.div,{animate:{x:s.quietHours.enabled?24:2},className:"w-5 h-5 mt-0.5 bg-white rounded-full"})})]})}),e.jsx(x.div,{whileTap:{scale:.98},onClick:n,className:`p-5 rounded-2xl border cursor-pointer transition-all ${s.matchDayOnly?"bg-blue-900/20 border-blue-500/30":"bg-slate-800/40 border-slate-700/50"}`,children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${s.matchDayOnly?"bg-gradient-to-br from-blue-500 to-cyan-500":"bg-slate-700"}`,children:e.jsx(ke,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-white",children:"Match Days Only"}),e.jsx("p",{className:"text-sm text-slate-400",children:s.matchDayOnly?"Active":"All days"})]}),e.jsx("div",{className:`w-12 h-6 rounded-full transition-colors ${s.matchDayOnly?"bg-blue-500":"bg-slate-600"}`,children:e.jsx(x.div,{animate:{x:s.matchDayOnly?24:2},className:"w-5 h-5 mt-0.5 bg-white rounded-full"})})]})})]}),e.jsx("div",{className:"space-y-4",children:l.map((c,d)=>{const m=s[c.key];return e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:d*.05},className:"bg-slate-800/40 rounded-2xl border border-slate-700/50 overflow-hidden",children:e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${c.color} flex items-center justify-center flex-shrink-0`,children:e.jsx(c.icon,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h4",{className:"text-white",children:c.title}),e.jsx(x.button,{whileTap:{scale:.95},onClick:()=>a(c.key,!m.enabled),className:`px-4 py-1 rounded-full text-sm transition-colors ${m.enabled?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-slate-700 text-slate-400"}`,children:m.enabled?"Enabled":"Disabled"})]}),e.jsx("p",{className:"text-slate-400 text-sm",children:c.description})]})]}),m.enabled&&e.jsx(x.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"grid grid-cols-3 gap-3 pt-4 border-t border-slate-700/50",children:[{key:"push",label:"Push",icon:Nt},{key:"email",label:"Email",icon:kt},{key:"inApp",label:"In-App",icon:L}].map(f=>e.jsxs(x.button,{whileTap:{scale:.95},onClick:()=>i(c.key,f.key,!m[f.key]),className:`p-3 rounded-xl text-sm transition-all ${m[f.key]?`bg-gradient-to-br ${c.color}/20 border-2 border-${c.color.split("-")[1]}-500/30`:"bg-slate-900/40 border-2 border-transparent"}`,children:[e.jsx(f.icon,{className:`w-5 h-5 mx-auto mb-1 ${m[f.key]?"text-white":"text-slate-500"}`}),e.jsx("div",{className:m[f.key]?"text-white":"text-slate-500",children:f.label})]},f.key))})]})},c.key)})})]})}function sa({userId:r,onClose:s}){const[t,a]=p.useState("themes"),[i,o]=p.useState(null),[n,l]=p.useState([]),[c,d]=p.useState([]),{theme:m,setTheme:f}=gt();p.useEffect(()=>{u()},[r]);const u=()=>{o(se.getUserPreferences(r)),l(se.getAvailableThemes()),d(T.getAvatarFrames(r))},j=g=>{f(g),u(),F.success("Theme updated! ðŸŽ¨",{description:"Your new theme has been applied."})},k=g=>{const w=c.find(M=>M.id===g);if(!(w!=null&&w.unlocked)){F.error("Frame locked ðŸ”’",{description:(w==null?void 0:w.requirement)||"Complete achievements to unlock this frame."});return}se.setAvatarFrame(r,g),u(),F.success("Avatar frame updated! âœ¨")},S=()=>{const g=se.updatePreferences(r,{animationsEnabled:!(i!=null&&i.animationsEnabled)});o(g),F.success(g.animationsEnabled?"Animations enabled âœ¨":"Animations disabled")},y=()=>{const g=se.updatePreferences(r,{soundEnabled:!(i!=null&&i.soundEnabled)});o(g),F.success(g.soundEnabled?"Sound enabled ðŸ”Š":"Sound disabled ðŸ”‡")};return i?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-purple-50 to-orange-50 p-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:s,className:"p-2 hover:bg-white/50 rounded-lg transition-colors",children:"â†"}),e.jsx("h1",{className:"bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Personalization"})]})}),e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsx("button",{onClick:()=>a("themes"),className:`flex-1 py-3 px-6 rounded-xl transition-all ${t==="themes"?"bg-white shadow-lg":"bg-white/50 hover:bg-white/70"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Ke,{className:"w-5 h-5"}),e.jsx("span",{children:"Themes"})]})}),e.jsx("button",{onClick:()=>a("frames"),className:`flex-1 py-3 px-6 rounded-xl transition-all ${t==="frames"?"bg-white shadow-lg":"bg-white/50 hover:bg-white/70"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(We,{className:"w-5 h-5"}),e.jsx("span",{children:"Avatar Frames"})]})}),e.jsx("button",{onClick:()=>a("settings"),className:`flex-1 py-3 px-6 rounded-xl transition-all ${t==="settings"?"bg-white shadow-lg":"bg-white/50 hover:bg-white/70"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5"}),e.jsx("span",{children:"Settings"})]})})]}),t==="themes"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map((g,w)=>{const M=i.selectedTheme===g.id;return e.jsxs(x.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:w*.05},whileHover:{scale:1.03},onClick:()=>j(g.id),className:`cursor-pointer bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all relative ${M?"ring-4 ring-purple-500":""}`,children:[M&&e.jsx("div",{className:"absolute top-3 right-3 bg-purple-500 rounded-full p-1",children:e.jsx(Fe,{className:"w-4 h-4 text-white"})}),e.jsx("div",{className:`w-full h-32 rounded-xl bg-gradient-to-br ${g.background} mb-4 border border-slate-200`,children:e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx("div",{className:`w-16 h-16 rounded-full bg-gradient-to-br ${g.gradient}`})})}),e.jsx("h3",{className:"mb-2",children:g.name}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:`w-6 h-6 rounded-full bg-${g.primary}-500 border-2 border-white shadow`}),e.jsx("div",{className:`w-6 h-6 rounded-full bg-${g.secondary}-500 border-2 border-white shadow`}),e.jsx("div",{className:`w-6 h-6 rounded-full bg-${g.accent}-500 border-2 border-white shadow`})]})]},g.id)})}),t==="frames"&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:c.map((g,w)=>{const M=i.selectedAvatarFrame===g.id;return e.jsxs(x.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:w*.05},whileHover:{scale:g.unlocked?1.05:1},onClick:()=>k(g.id),className:`cursor-pointer bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all relative ${M?"ring-4 ring-purple-500":""} ${g.unlocked?"":"opacity-60"}`,children:[M&&g.unlocked&&e.jsx("div",{className:"absolute top-3 right-3 bg-purple-500 rounded-full p-1 z-10",children:e.jsx(Fe,{className:"w-4 h-4 text-white"})}),!g.unlocked&&e.jsx("div",{className:"absolute inset-0 bg-slate-900/5 backdrop-blur-[1px] flex items-center justify-center rounded-2xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 bg-slate-400 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(ee,{className:"w-4 h-4 text-white"})}),e.jsx("p",{className:"text-xs text-slate-600 px-2",children:g.requirement})]})}),e.jsxs("div",{className:"relative z-0",children:[e.jsx("div",{className:"mb-4 mx-auto w-24 h-24 relative",children:e.jsx("div",{className:`absolute inset-0 rounded-full bg-gradient-to-br ${g.gradient} p-1`,children:e.jsx("div",{className:"w-full h-full rounded-full bg-slate-200 flex items-center justify-center",children:e.jsx(We,{className:"w-8 h-8 text-slate-400"})})})}),e.jsx("h4",{className:"text-center mb-1",children:g.name}),e.jsx("p",{className:"text-xs text-center text-slate-600",children:g.description})]})]},g.id)})}),t==="settings"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl p-6 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-purple-100 rounded-xl",children:e.jsx(Z,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h3",{children:"Animations"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Enable smooth transitions and effects"})]})]}),e.jsx("button",{onClick:S,className:`relative w-14 h-8 rounded-full transition-colors ${i.animationsEnabled?"bg-purple-500":"bg-slate-300"}`,children:e.jsx(x.div,{animate:{x:i.animationsEnabled?24:0},className:"absolute top-1 left-1 w-6 h-6 bg-white rounded-full shadow-md"})})]})}),e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-2xl p-6 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-xl",children:e.jsx(L,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{children:"Sound Effects"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Play sounds for interactions"})]})]}),e.jsx("button",{onClick:y,className:`relative w-14 h-8 rounded-full transition-colors ${i.soundEnabled?"bg-blue-500":"bg-slate-300"}`,children:e.jsx(x.div,{animate:{x:i.soundEnabled?24:0},className:"absolute top-1 left-1 w-6 h-6 bg-white rounded-full shadow-md"})})]})}),e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl p-6 border border-purple-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ee,{className:"w-12 h-12 text-purple-600 mx-auto mb-3"}),e.jsx("h3",{className:"mb-2",children:"Unlock More Customization"}),e.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Complete achievements and level up to unlock exclusive themes, frames, and badges!"}),e.jsxs("div",{className:"flex gap-2 justify-center flex-wrap",children:[e.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-600 rounded-full text-sm",children:"Level 10: Profile Themes"}),e.jsx("span",{className:"px-3 py-1 bg-pink-100 text-pink-600 rounded-full text-sm",children:"Level 20: VIP Frames"})]})]})})]})]})}):null}function aa({userId:r}){const[s,t]=p.useState([]),[a,i]=p.useState(null);p.useEffect(()=>{const c=Ge.getFriendshipNetwork(r);t(c)},[r]);const o=c=>c>=90?"from-pink-500 to-rose-500":c>=75?"from-purple-500 to-pink-500":c>=60?"from-blue-500 to-purple-500":c>=40?"from-cyan-500 to-blue-500":"from-slate-500 to-slate-600",n=c=>c>=90?"Best Friends ðŸ’•":c>=75?"Close Friends ðŸ’œ":c>=60?"Good Friends ðŸ’™":c>=40?"Friends ðŸ¤":"New Connection ðŸŒ±",l=c=>{const d=new Date(c),f=Math.floor((new Date().getTime()-d.getTime())/(1e3*60*60*24));return f===0?"Today":f===1?"Yesterday":f<7?`${f} days ago`:f<30?`${Math.floor(f/7)} weeks ago`:`${Math.floor(f/30)} months ago`};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(x.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-purple-900/20 to-pink-900/20 rounded-3xl p-6 border border-purple-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-white mb-1",children:"Your Friendship Network"}),e.jsx("p",{className:"text-slate-400",children:"Building connections through sports"})]}),e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center",children:e.jsx(K,{className:"w-8 h-8 text-white"})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-slate-800/60 rounded-xl p-4 text-center",children:[e.jsx("div",{className:"text-2xl text-white mb-1",children:s.length}),e.jsx("div",{className:"text-sm text-slate-400",children:"Connections"})]}),e.jsxs("div",{className:"bg-slate-800/60 rounded-xl p-4 text-center",children:[e.jsx("div",{className:"text-2xl text-pink-400 mb-1",children:s.filter(c=>c.strength>=75).length}),e.jsx("div",{className:"text-sm text-slate-400",children:"Close Friends"})]}),e.jsxs("div",{className:"bg-slate-800/60 rounded-xl p-4 text-center",children:[e.jsx("div",{className:"text-2xl text-purple-400 mb-1",children:s.reduce((c,d)=>c+d.matchCount,0)}),e.jsx("div",{className:"text-sm text-slate-400",children:"Total Matches"})]})]})]}),e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"bg-slate-800/40 rounded-3xl p-6 border border-slate-700/50 overflow-hidden",children:[e.jsxs("h3",{className:"text-white mb-6 flex items-center gap-2",children:[e.jsx(R,{className:"w-5 h-5 text-purple-400"}),"Connection Strength Visualization"]}),e.jsxs("div",{className:"relative h-64 flex items-center justify-center",children:[e.jsx(x.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.3,type:"spring"},className:"absolute w-20 h-20 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center z-10 border-4 border-slate-900",children:e.jsx("span",{className:"text-2xl",children:"ðŸ‘¤"})}),s.slice(0,8).map((c,d)=>{const m=d/Math.min(s.length,8)*2*Math.PI,f=100,u=Math.cos(m)*f,j=Math.sin(m)*f,k=12+c.strength/100*8;return e.jsxs(x.div,{initial:{scale:0,x:0,y:0},animate:{scale:1,x:u,y:j},transition:{delay:.4+d*.1,type:"spring"},onClick:()=>i(c),className:`absolute w-${Math.floor(k)} h-${Math.floor(k)} cursor-pointer`,style:{width:`${k*4}px`,height:`${k*4}px`},children:[e.jsxs("svg",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none",style:{width:`${Math.abs(u)*2+80}px`,height:`${Math.abs(j)*2+80}px`},children:[e.jsx("line",{x1:"50%",y1:"50%",x2:u>0?"0%":"100%",y2:j>0?"0%":"100%",stroke:"url(#gradient)",strokeWidth:c.strength/30,opacity:.3}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#a855f7"}),e.jsx("stop",{offset:"100%",stopColor:"#ec4899"})]})})]}),e.jsx(x.div,{whileHover:{scale:1.2},className:`w-full h-full bg-gradient-to-br ${o(c.strength)} rounded-full flex items-center justify-center border-2 border-slate-900`,children:e.jsx("img",{src:c.avatar,alt:c.userName,className:"w-full h-full rounded-full"})})]},c.userId)})]}),s.length>8&&e.jsxs("p",{className:"text-center text-slate-400 text-sm mt-4",children:["Showing 8 of ",s.length," connections"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-white flex items-center gap-2",children:[e.jsx(I,{className:"w-5 h-5 text-pink-400"}),"All Connections"]}),s.map((c,d)=>e.jsx(x.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:d*.05},onClick:()=>i(c),className:"bg-slate-800/40 rounded-2xl p-4 border border-slate-700/50 hover:border-purple-500/30 transition-all cursor-pointer",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-14 h-14 bg-gradient-to-br ${o(c.strength)} rounded-xl p-0.5`,children:e.jsx("img",{src:c.avatar,alt:c.userName,className:"w-full h-full rounded-xl"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-white mb-1",children:c.userName}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(H,{className:"w-3 h-3"}),c.matchCount," matches"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ke,{className:"w-3 h-3"}),l(c.lastPlayed)]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-white mb-1",children:n(c.strength)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 h-2 bg-slate-700 rounded-full overflow-hidden",children:e.jsx(x.div,{initial:{width:0},animate:{width:`${c.strength}%`},transition:{delay:d*.05+.2,duration:.5},className:`h-full bg-gradient-to-r ${o(c.strength)}`})}),e.jsxs("span",{className:"text-xs text-slate-500 w-8",children:[c.strength,"%"]})]})]})]})},c.userId)),s.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸŒ±"}),e.jsx("h3",{className:"text-white mb-2",children:"Start Building Your Network"}),e.jsx("p",{className:"text-slate-400",children:"Join matches to connect with fellow players and build lasting friendships!"})]})]}),a&&e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},onClick:()=>i(null),className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs(x.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},onClick:c=>c.stopPropagation(),className:"bg-slate-900 rounded-3xl p-6 max-w-md w-full border border-slate-700",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:`w-24 h-24 mx-auto mb-4 bg-gradient-to-br ${o(a.strength)} rounded-2xl p-1`,children:e.jsx("img",{src:a.avatar,alt:a.userName,className:"w-full h-full rounded-2xl"})}),e.jsx("h3",{className:"text-white mb-2",children:a.userName}),e.jsx("p",{className:"text-slate-400",children:n(a.strength)})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"bg-slate-800/60 rounded-xl p-4",children:[e.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Friendship Strength"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-1 h-3 bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full bg-gradient-to-r ${o(a.strength)}`,style:{width:`${a.strength}%`}})}),e.jsxs("span",{className:"text-white",children:[a.strength,"%"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-slate-800/60 rounded-xl p-4 text-center",children:[e.jsx("div",{className:"text-2xl text-purple-400 mb-1",children:a.matchCount}),e.jsx("div",{className:"text-sm text-slate-400",children:"Matches Together"})]}),e.jsxs("div",{className:"bg-slate-800/60 rounded-xl p-4 text-center",children:[e.jsx("div",{className:"text-sm text-cyan-400 mb-1",children:l(a.lastPlayed)}),e.jsx("div",{className:"text-sm text-slate-400",children:"Last Played"})]})]})]}),e.jsx("button",{onClick:()=>i(null),className:"w-full py-3 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl text-white hover:shadow-lg hover:shadow-purple-500/20 transition-all",children:"Close"})]})})]})}function ra({userId:r}){const[s,t]=p.useState([]),[a,i]=p.useState(null),[o,n]=p.useState(new Map);p.useEffect(()=>{l()},[r]);const l=()=>v(null,null,function*(){try{const m=Ge.getSuggestedFriends(r,10);t(m);const f=yield _e.getAllUsers(),u=new Map(f.map(j=>[j.id,j]));n(u)}catch(m){console.error("Error loading compatibility suggestions:",m)}}),c=m=>m>=90?{label:"Perfect Match",emoji:"ðŸ’•",color:"from-pink-500 to-rose-500"}:m>=80?{label:"Great Match",emoji:"ðŸ’œ",color:"from-purple-500 to-pink-500"}:m>=70?{label:"Good Match",emoji:"ðŸ’™",color:"from-blue-500 to-purple-500"}:m>=60?{label:"Nice Match",emoji:"ðŸ’š",color:"from-green-500 to-blue-500"}:{label:"Potential Match",emoji:"ðŸŒŸ",color:"from-cyan-500 to-blue-500"},d=m=>{switch(m){case"playStyle":return e.jsx(H,{className:"w-4 h-4"});case"timing":return e.jsx(bt,{className:"w-4 h-4"});case"location":return e.jsx(Ze,{className:"w-4 h-4"});case"interests":return e.jsx(I,{className:"w-4 h-4"});case"personality":return e.jsx(St,{className:"w-4 h-4"});default:return e.jsx(R,{className:"w-4 h-4"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(x.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-pink-900/20 to-purple-900/20 rounded-3xl p-6 border border-pink-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-white mb-1",children:"You Might Vibe With..."}),e.jsx("p",{className:"text-slate-400",children:"AI-powered friendship matching"})]}),e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-pink-500 to-purple-500 rounded-2xl flex items-center justify-center",children:e.jsx(R,{className:"w-8 h-8 text-white"})})]}),e.jsx("div",{className:"bg-slate-800/60 rounded-xl p-4",children:e.jsx("p",{className:"text-sm text-slate-300",children:"âœ¨ Our AI analyzes play style, timing preferences, location, shared interests, and personality to suggest perfect matches!"})})]}),e.jsxs("div",{className:"grid gap-4",children:[s.map((m,f)=>{const u=o.get(m.targetUserId);if(!u)return null;const j=c(m.overall);return e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:f*.1},onClick:()=>i(m),className:"bg-slate-800/40 rounded-2xl p-5 border border-slate-700/50 hover:border-pink-500/30 transition-all cursor-pointer group",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`w-16 h-16 bg-gradient-to-br ${j.color} rounded-xl p-0.5`,children:e.jsx("img",{src:u.avatar,alt:u.name,className:"w-full h-full rounded-xl"})}),e.jsx("div",{className:"absolute -bottom-2 -right-2 w-8 h-8 bg-slate-900 rounded-full flex items-center justify-center border-2 border-slate-700",children:e.jsx("span",{className:"text-xs",children:j.emoji})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-white mb-1",children:u.name}),e.jsx("p",{className:"text-sm text-slate-400",children:j.label})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`text-2xl bg-gradient-to-r ${j.color} bg-clip-text text-transparent`,children:[m.overall,"%"]}),e.jsx("div",{className:"text-xs text-slate-500",children:"Match"})]})]}),e.jsx("div",{className:"grid grid-cols-5 gap-2 mb-3",children:[{label:"Play",value:m.playStyle},{label:"Time",value:m.timing},{label:"Location",value:m.location},{label:"Interests",value:m.interests},{label:"Vibe",value:m.personality}].map((k,S)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"h-12 bg-slate-700 rounded-lg overflow-hidden flex flex-col-reverse mb-1",children:e.jsx(x.div,{initial:{height:0},animate:{height:`${k.value}%`},transition:{delay:f*.1+S*.05,duration:.5},className:`bg-gradient-to-t ${j.color}`})}),e.jsx("div",{className:"text-xs text-slate-500",children:k.label})]},S))}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[m.reasons.slice(0,2).map((k,S)=>e.jsx("div",{className:"px-3 py-1 bg-slate-700/60 rounded-full text-xs text-slate-300",children:k},S)),m.reasons.length>2&&e.jsxs("div",{className:"px-3 py-1 bg-slate-700/60 rounded-full text-xs text-cyan-400",children:["+",m.reasons.length-2," more"]})]})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-slate-700/50",children:e.jsx("button",{className:"w-full py-2 bg-gradient-to-r from-pink-500/10 to-purple-500/10 hover:from-pink-500/20 hover:to-purple-500/20 rounded-xl text-pink-400 transition-all group-hover:shadow-lg group-hover:shadow-pink-500/10",children:"View Full Compatibility â†’"})})]},m.targetUserId)}),s.length===0&&e.jsxs("div",{className:"text-center py-12 bg-slate-800/40 rounded-2xl border border-slate-700/50",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ”"}),e.jsx("h3",{className:"text-white mb-2",children:"Looking for Matches..."}),e.jsx("p",{className:"text-slate-400",children:"Join more matches to help us find your perfect sports friends!"})]})]}),a&&e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},onClick:()=>i(null),className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsx(x.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},onClick:m=>m.stopPropagation(),className:"bg-slate-900 rounded-3xl p-6 max-w-lg w-full border border-slate-700 max-h-[90vh] overflow-y-auto",children:(()=>{const m=o.get(a.targetUserId);if(!m)return null;const f=c(a.overall);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:`w-24 h-24 mx-auto mb-4 bg-gradient-to-br ${f.color} rounded-2xl p-1`,children:e.jsx("img",{src:m.avatar,alt:m.name,className:"w-full h-full rounded-2xl"})}),e.jsx("h3",{className:"text-white mb-2",children:m.name}),e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx("span",{className:"text-3xl",children:f.emoji}),e.jsxs("div",{children:[e.jsxs("div",{className:`text-2xl bg-gradient-to-r ${f.color} bg-clip-text text-transparent`,children:[a.overall,"% Match"]}),e.jsx("div",{className:"text-sm text-slate-400",children:f.label})]})]})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("h4",{className:"text-white flex items-center gap-2",children:[e.jsx(K,{className:"w-5 h-5"}),"Compatibility Breakdown"]}),[{key:"playStyle",label:"Play Style & Energy",value:a.playStyle},{key:"timing",label:"Timing Preferences",value:a.timing},{key:"location",label:"Location Match",value:a.location},{key:"interests",label:"Shared Interests",value:a.interests},{key:"personality",label:"Personality Vibe",value:a.personality}].map((u,j)=>e.jsxs(x.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:j*.1},className:"bg-slate-800/60 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-purple-400",children:d(u.key)}),e.jsx("span",{className:"text-white text-sm",children:u.label})]}),e.jsxs("span",{className:"text-white",children:[u.value,"%"]})]}),e.jsx("div",{className:"h-2 bg-slate-700 rounded-full overflow-hidden",children:e.jsx(x.div,{initial:{width:0},animate:{width:`${u.value}%`},transition:{delay:j*.1+.2,duration:.5},className:`h-full bg-gradient-to-r ${f.color}`})})]},u.key))]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-white mb-3",children:"Why You'll Vibe"}),e.jsx("div",{className:"space-y-2",children:a.reasons.map((u,j)=>e.jsxs(x.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:j*.1},className:"flex items-start gap-2 text-slate-300 text-sm",children:[e.jsx(R,{className:"w-4 h-4 text-yellow-400 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:u})]},j))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("button",{onClick:()=>i(null),className:"py-3 bg-slate-800 hover:bg-slate-700 rounded-xl text-white transition-all",children:"Close"}),e.jsx("button",{className:"py-3 bg-gradient-to-r from-pink-500 to-purple-500 rounded-xl text-white hover:shadow-lg hover:shadow-pink-500/20 transition-all",children:"Invite to Match"})]})]})})()})})]})}function ia({userId:r}){const[s,t]=p.useState([]),[a,i]=p.useState(null),[o,n]=p.useState(!1),[l,c]=p.useState("great_teammate"),[d,m]=p.useState(""),[f,u]=p.useState(""),[j,k]=p.useState([]);p.useEffect(()=>{y(),S()},[r]);const S=()=>v(null,null,function*(){try{const _=(yield _e.getAllUsers()).filter(E=>E.id!==r);k(_),_.length>0&&m(_[0].id)}catch(h){console.error("Error loading users:",h)}}),y=()=>{const h=G.getPublicGratitude(20);t(h);const _=G.getMVPOfKindness();i(_)},g=h=>{const _=s.find(E=>E.id===h);_&&(_.likes.includes(r)?G.unlikeGratitude(h,r):G.likeGratitude(h,r),y())},w=()=>{f.trim()&&(G.createGratitude({fromUserId:r,toUserId:d,message:f.trim(),category:l,isPublic:!0}),u(""),n(!1),y())},M=[{value:"great_teammate",label:"Great Teammate",emoji:"ðŸ¤"},{value:"newbie_helper",label:"Newbie Helper",emoji:"ðŸŒŸ"},{value:"positive_vibe",label:"Positive Vibe",emoji:"âœ¨"},{value:"skilled_player",label:"Skilled Player",emoji:"âš¡"},{value:"organizer",label:"Organizer",emoji:"ðŸŽ¯"},{value:"other",label:"Other",emoji:"â¤ï¸"}],W=h=>{const _=new Date(h),X=new Date().getTime()-_.getTime(),b=Math.floor(X/6e4),N=Math.floor(b/60),A=Math.floor(N/24);return b<1?"Just now":b<60?`${b}m ago`:N<24?`${N}h ago`:A<7?`${A}d ago`:_.toLocaleDateString()};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(x.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-yellow-900/20 to-orange-900/20 rounded-3xl p-6 border border-yellow-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-white mb-1",children:"Community Gratitude Wall"}),e.jsx("p",{className:"text-slate-400",children:"Spread positivity and appreciation"})]}),e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-yellow-500 to-orange-500 rounded-2xl flex items-center justify-center",children:e.jsx(I,{className:"w-8 h-8 text-white"})})]}),a&&e.jsxs(x.div,{initial:{scale:.95},animate:{scale:1},className:"bg-gradient-to-r from-yellow-500/10 to-orange-500/10 rounded-2xl p-4 border border-yellow-500/20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(z,{className:"w-5 h-5 text-yellow-400"}),e.jsx("span",{className:"text-yellow-400",children:"MVP of Kindness This Week"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:a.avatar,alt:a.userName,className:"w-12 h-12 rounded-xl border-2 border-yellow-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-white",children:a.userName}),e.jsxs("div",{className:"text-sm text-slate-400",children:[a.gratitudeCount," appreciations received"]})]}),e.jsx("div",{className:"text-3xl",children:"ðŸ†"})]})]})]}),e.jsxs($,{onClick:()=>n(!o),className:"w-full bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white py-6 rounded-2xl",children:[e.jsx(R,{className:"w-5 h-5 mr-2"}),"Share Gratitude"]}),e.jsx(ie,{children:o&&e.jsxs(x.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-slate-800/40 rounded-2xl p-5 border border-slate-700/50 overflow-hidden",children:[e.jsx("h3",{className:"text-white mb-4",children:"Express Your Gratitude"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-sm text-slate-400 mb-2 block",children:"Category"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:M.map(h=>e.jsxs("button",{onClick:()=>c(h.value),className:`p-3 rounded-xl border transition-all ${l===h.value?"bg-purple-500/20 border-purple-500 text-white":"bg-slate-700/40 border-slate-700 text-slate-400 hover:border-slate-600"}`,children:[e.jsx("div",{className:"text-2xl mb-1",children:h.emoji}),e.jsx("div",{className:"text-xs",children:h.label})]},h.value))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-sm text-slate-400 mb-2 block",children:"Recipient"}),e.jsx("select",{value:d,onChange:h=>m(h.target.value),className:"w-full px-4 py-3 bg-slate-700/60 border border-slate-600 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-purple-500",children:j.map(h=>e.jsx("option",{value:h.id,children:h.name},h.id))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-sm text-slate-400 mb-2 block",children:"Your Message"}),e.jsx("textarea",{value:f,onChange:h=>u(h.target.value),placeholder:"Share what you appreciate...",className:"w-full h-24 px-4 py-3 bg-slate-700/60 border border-slate-600 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-purple-500 resize-none",maxLength:280}),e.jsxs("div",{className:"text-xs text-slate-500 text-right mt-1",children:[f.length,"/280"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx($,{onClick:()=>n(!1),variant:"outline",className:"flex-1 border-slate-700 text-slate-400 hover:bg-slate-800",children:"Cancel"}),e.jsxs($,{onClick:w,disabled:!f.trim(),className:"flex-1 bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white disabled:opacity-50",children:[e.jsx(Mt,{className:"w-4 h-4 mr-2"}),"Post"]})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-white flex items-center gap-2",children:[e.jsx(ee,{className:"w-5 h-5 text-yellow-400"}),"Recent Appreciation"]}),s.map((h,_)=>{const E=G.getCategoryInfo(h.category),X=h.likes.includes(r);return e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:_*.05},className:"bg-slate-800/40 rounded-2xl p-5 border border-slate-700/50",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("img",{src:h.fromUserAvatar,alt:h.fromUserName,className:"w-10 h-10 rounded-xl"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-white",children:h.fromUserName}),e.jsx("span",{className:"text-slate-500",children:"â†’"}),e.jsx("span",{className:"text-purple-400",children:h.toUserName})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`px-2 py-1 bg-gradient-to-r ${E.color} bg-opacity-20 rounded-lg text-xs text-white flex items-center gap-1`,children:[e.jsx("span",{children:E.emoji}),e.jsx("span",{children:E.label})]}),e.jsx("span",{className:"text-xs text-slate-500",children:W(h.timestamp)})]})]})]}),e.jsx("p",{className:"text-slate-300 mb-4 pl-13",children:h.message}),e.jsx("div",{className:"flex items-center gap-4 pl-13",children:e.jsxs("button",{onClick:()=>g(h.id),className:`flex items-center gap-2 px-3 py-1.5 rounded-lg transition-all ${X?"bg-pink-500/20 text-pink-400":"bg-slate-700/40 text-slate-400 hover:bg-slate-700"}`,children:[e.jsx(I,{className:`w-4 h-4 ${X?"fill-current":""}`}),e.jsx("span",{className:"text-sm",children:h.likes.length})]})})]},h.id)}),s.length===0&&e.jsxs("div",{className:"text-center py-12 bg-slate-800/40 rounded-2xl border border-slate-700/50",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ’"}),e.jsx("h3",{className:"text-white mb-2",children:"No Gratitude Posts Yet"}),e.jsx("p",{className:"text-slate-400",children:"Be the first to spread some positivity!"})]})]})]})}function la({event:r,onComplete:s}){const[t,a]=p.useState([]);if(p.useEffect(()=>{if(r){const n=Array.from({length:50},(c,d)=>({id:d,x:Math.random()*window.innerWidth,y:-20,rotation:Math.random()*360,color:["#ef4444","#f59e0b","#10b981","#3b82f6","#8b5cf6","#ec4899"][Math.floor(Math.random()*6)],size:Math.random()*10+5}));a(n);const l=setTimeout(()=>{s==null||s()},3e3);return()=>clearTimeout(l)}},[r,s]),!r)return null;const i=()=>{if(r.icon)return r.icon;switch(r.type){case"achievement_unlock":return e.jsx(z,{className:"w-16 h-16"});case"level_up":return e.jsx(B,{className:"w-16 h-16"});case"trust_increase":return e.jsx(H,{className:"w-16 h-16"});case"streak_milestone":return e.jsx(Z,{className:"w-16 h-16"});case"badge_earned":return e.jsx(ee,{className:"w-16 h-16"});case"payment_complete":return e.jsx(I,{className:"w-16 h-16"});default:return e.jsx(B,{className:"w-16 h-16"})}},o=()=>{switch(r.type){case"achievement_unlock":return"from-yellow-500 via-orange-500 to-red-500";case"level_up":return"from-purple-500 via-pink-500 to-red-500";case"trust_increase":return"from-green-500 via-emerald-500 to-teal-500";case"streak_milestone":return"from-orange-500 via-red-500 to-pink-500";case"badge_earned":return"from-blue-500 via-cyan-500 to-teal-500";case"payment_complete":return"from-pink-500 via-purple-500 to-indigo-500";default:return"from-blue-500 to-purple-500"}};return e.jsx(ie,{children:e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[200] flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:s,children:[t.map(n=>e.jsx(x.div,{initial:{x:n.x,y:n.y,rotation:n.rotation},animate:{y:window.innerHeight+100,rotation:n.rotation+720},transition:{duration:3,delay:Math.random()*.5,ease:"easeIn"},style:{position:"absolute",width:n.size,height:n.size,backgroundColor:n.color,borderRadius:Math.random()>.5?"50%":"0%"}},n.id)),e.jsxs(x.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},exit:{scale:0,rotate:180},transition:{type:"spring",damping:15},className:"relative z-10 max-w-md mx-4",onClick:n=>n.stopPropagation(),children:[e.jsx("div",{className:`bg-gradient-to-br ${o()} p-1 rounded-3xl`,children:e.jsxs("div",{className:"bg-slate-900 rounded-3xl p-8 text-center",children:[e.jsx(x.div,{animate:{scale:[1,1.2,1],rotate:[0,10,-10,0]},transition:{duration:1,repeat:1/0,repeatDelay:.5},className:`inline-block text-transparent bg-gradient-to-br ${o()} bg-clip-text mb-4`,children:i()}),e.jsx(x.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mb-3 text-white",children:r.title}),e.jsx(x.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-slate-300 mb-4",children:r.message}),r.xpEarned&&e.jsxs(x.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.5,type:"spring"},className:`inline-flex items-center gap-2 bg-gradient-to-r ${o()} px-6 py-3 rounded-full text-white`,children:[e.jsx(B,{className:"w-5 h-5",fill:"currentColor"}),e.jsxs("span",{children:["+",r.xpEarned," XP"]})]}),[...Array(8)].map((n,l)=>e.jsx(x.div,{initial:{scale:0,opacity:1},animate:{scale:[0,1,0],opacity:[0,1,0],x:Math.cos(l*Math.PI*2/8)*100,y:Math.sin(l*Math.PI*2/8)*100},transition:{duration:1.5,delay:l*.1,repeat:1/0,repeatDelay:1},className:"absolute top-1/2 left-1/2 w-2 h-2 bg-yellow-400 rounded-full",style:{transform:"translate(-50%, -50%)"}},l))]})}),e.jsx(x.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1},className:"text-center text-white/60 text-sm mt-4",children:"Tap anywhere to continue"})]}),(r.type==="achievement_unlock"||r.type==="level_up")&&e.jsx(e.Fragment,{children:[...Array(5)].map((n,l)=>e.jsx(x.div,{initial:{x:window.innerWidth/2,y:window.innerHeight/2,scale:0},animate:{x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight*.5,scale:[0,1,0]},transition:{duration:1,delay:l*.3,repeat:2,repeatDelay:1},className:"absolute",children:e.jsx("div",{className:"relative w-20 h-20",children:[...Array(8)].map((c,d)=>e.jsx(x.div,{initial:{scale:0,opacity:1},animate:{scale:[0,1],opacity:[1,0],x:Math.cos(d*Math.PI*2/8)*50,y:Math.sin(d*Math.PI*2/8)*50},transition:{duration:.8,delay:l*.3},className:"absolute top-1/2 left-1/2 w-3 h-3 rounded-full",style:{backgroundColor:["#ef4444","#f59e0b","#10b981","#3b82f6","#8b5cf6"][d%5]}},d))})},`firework-${l}`))})]})})}function na(){const[r,s]=p.useState(null);return{currentEvent:r,celebrate:i=>{s(i)},clearCelebration:()=>{s(null)}}}var fe="Switch",[ca]=ht(fe),[oa,da]=ca(fe),st=p.forwardRef((r,s)=>{const M=r,{__scopeSwitch:t,name:a,checked:i,defaultChecked:o,required:n,disabled:l,value:c="on",onCheckedChange:d,form:m}=M,f=te(M,["__scopeSwitch","name","checked","defaultChecked","required","disabled","value","onCheckedChange","form"]),[u,j]=p.useState(null),k=qe(s,W=>j(W)),S=p.useRef(!1),y=u?m||!!u.closest("form"):!0,[g,w]=mt({prop:i,defaultProp:o!=null?o:!1,onChange:d,caller:fe});return e.jsxs(oa,{scope:t,checked:g,disabled:l,children:[e.jsx(Xe.button,U(D({type:"button",role:"switch","aria-checked":g,"aria-required":n,"data-state":lt(g),"data-disabled":l?"":void 0,disabled:l,value:c},f),{ref:k,onClick:xt(r.onClick,W=>{w(h=>!h),y&&(S.current=W.isPropagationStopped(),S.current||W.stopPropagation())})})),y&&e.jsx(it,{control:u,bubbles:!S.current,name:a,value:c,checked:g,required:n,disabled:l,form:m,style:{transform:"translateX(-100%)"}})]})});st.displayName=fe;var at="SwitchThumb",rt=p.forwardRef((r,s)=>{const o=r,{__scopeSwitch:t}=o,a=te(o,["__scopeSwitch"]),i=da(at,t);return e.jsx(Xe.span,U(D({"data-state":lt(i.checked),"data-disabled":i.disabled?"":void 0},a),{ref:s}))});rt.displayName=at;var ma="SwitchBubbleInput",it=p.forwardRef((n,o)=>{var l=n,{__scopeSwitch:r,control:s,checked:t,bubbles:a=!0}=l,i=te(l,["__scopeSwitch","control","checked","bubbles"]);const c=p.useRef(null),d=qe(c,o),m=ut(t),f=pt(s);return p.useEffect(()=>{const u=c.current;if(!u)return;const j=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(j,"checked").set;if(m!==t&&S){const y=new Event("click",{bubbles:a});S.call(u,t),u.dispatchEvent(y)}},[m,t,a]),e.jsx("input",U(D({type:"checkbox","aria-hidden":!0,defaultChecked:t},i),{tabIndex:-1,ref:d,style:U(D(D({},i.style),f),{position:"absolute",pointerEvents:"none",opacity:0,margin:0})}))});it.displayName=ma;function lt(r){return r?"checked":"unchecked"}var ha=st,xa=rt;function ua(t){var a=t,{className:r}=a,s=te(a,["className"]);return e.jsx(ha,U(D({"data-slot":"switch",className:Te("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",r)},s),{children:e.jsx(xa,{"data-slot":"switch-thumb",className:Te("bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})}))}const ce=r=>r*Math.PI/180,pa=6371,Oe=(r,s)=>{const t=ce(s.lat-r.lat),a=ce(s.lng-r.lng),i=ce(r.lat),o=ce(s.lat),n=be(Math.sin(t/2),2),l=be(Math.sin(a/2),2),c=n+Math.cos(i)*Math.cos(o)*l;return 2*pa*Math.asin(Math.sqrt(c))},fa=5;class ga{upsertPresence(s){return v(this,null,function*(){var o,n,l;const t=U(D({},s),{status:(o=s.status)!=null?o:"active",radius_km:(n=s.radius_km)!=null?n:fa,expires_at:(l=s.expires_at)!=null?l:new Date(Date.now()+36e5).toISOString()}),{error:a,data:i}=yield C.from("presence_events").upsert(t).select().single();if(a)throw a;return i})}getPresence(){return v(this,arguments,function*(s={}){const{sport:t,maxAgeMinutes:a=180}=s,i=new Date(Date.now()-a*60*1e3).toISOString();let o=C.from("presence_events").select("*").gte("created_at",i).eq("status","active");t&&(o=o.eq("sport",t));const{data:n,error:l}=yield o;if(l)throw l;return n!=null?n:[]})}cluster(s,t=1){const a=[];return s.forEach(i=>{var n;const o=a.find(l=>Oe({lat:l.lat,lng:l.lng},{lat:i.latitude,lng:i.longitude})<=t);o?(o.count+=1,o.sports[i.sport]=((n=o.sports[i.sport])!=null?n:0)+1,o.lat=(o.lat*(o.count-1)+i.latitude)/o.count,o.lng=(o.lng*(o.count-1)+i.longitude)/o.count):a.push({id:crypto.randomUUID(),lat:i.latitude,lng:i.longitude,count:1,sports:{[i.sport]:1}})}),a}saveSearch(s){return v(this,null,function*(){var o;const t=U(D({},s),{notify:(o=s.notify)!=null?o:!0}),{data:a,error:i}=yield C.from("saved_searches").upsert(t).select().single();if(i)throw i;return a})}listSavedSearches(s){return v(this,null,function*(){const{data:t,error:a}=yield C.from("saved_searches").select("*").eq("user_id",s).order("created_at",{ascending:!1});if(a)throw a;return t!=null?t:[]})}subscribeAlert(s){return v(this,null,function*(){var o,n,l;const t=U(D({},s),{active:(o=s.active)!=null?o:!0,days_of_week:(n=s.days_of_week)!=null?n:[0,1,2,3,4,5,6],notify_channels:(l=s.notify_channels)!=null?l:["push"]}),{data:a,error:i}=yield C.from("geo_alert_subscriptions").upsert(t).select().single();if(i)throw i;return a})}listGeoAlerts(s){return v(this,null,function*(){const{data:t,error:a}=yield C.from("geo_alert_subscriptions").select("*").eq("user_id",s).order("created_at",{ascending:!1});if(a)throw a;return t!=null?t:[]})}recordAlertTrigger(s){return v(this,null,function*(){const{error:t}=yield C.from("geo_alert_subscriptions").update({last_triggered:new Date().toISOString()}).eq("id",s);if(t)throw t})}getPresenceWithFilters(o){return v(this,arguments,function*({sport:s,center:t,radiusKm:a=5,timeWindow:i}){return(yield this.getPresence({sport:s})).filter(c=>{const d=t?Oe(t,{lat:c.latitude,lng:c.longitude})<=a:!0,m=i&&i.start&&i.end?c.expires_at&&c.expires_at>=i.start&&c.expires_at<=i.end:!0;return d&&m})})}notifySuccess(s){F.success(s)}}const O=new ga,ba=Ct,ja=_t,ve=Pt,we=At,Be={lat:23.0225,lng:72.5714},He=["all","tennis","football","basketball","cricket","running","badminton"],oe=[{id:"now",label:"Now (next 2h)",start:new Date().toISOString(),end:new Date(Date.now()+7200*1e3).toISOString()},{id:"today",label:"Today",start:new Date().toISOString(),end:new Date(new Date().setHours(23,59,59,999)).toISOString()},{id:"weekend",label:"Weekend",start:new Date().toISOString(),end:new Date(Date.now()+4320*60*1e3).toISOString()}];function ya({userId:r}){const[s,t]=p.useState(Be),[a,i]=p.useState([]),[o,n]=p.useState(!1),[l,c]=p.useState("all"),[d,m]=p.useState(5),[f,u]=p.useState("now"),[j,k]=p.useState(!0),[S,y]=p.useState([]),[g,w]=p.useState([]),[M,W]=p.useState("My nearby tennis");p.useEffect(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(b=>t({lat:b.coords.latitude,lng:b.coords.longitude}),()=>t(Be))},[]),p.useEffect(()=>{v(null,null,function*(){n(!0);try{const N=oe.find(nt=>nt.id===f),A=yield O.getPresenceWithFilters({sport:l==="all"?void 0:l,center:s,radiusKm:d,timeWindow:N?{start:N.start,end:N.end}:void 0});i(A)}catch(N){console.error("Failed to load presence",N)}finally{n(!1)}})},[l,d,f,s]),p.useEffect(()=>{v(null,null,function*(){try{const[N,A]=yield Promise.all([O.listSavedSearches(r),O.listGeoAlerts(r)]);y(N),w(A)}catch(N){console.error("Failed to load saved searches",N)}})},[r]);const h=p.useMemo(()=>O.cluster(a,d/2),[a,d]),_=a.length,E=()=>v(null,null,function*(){const b=oe.find(A=>A.id===f);yield O.saveSearch({user_id:r,name:M||"Saved search",sports:l==="all"?He.filter(A=>A!=="all"):[l],radius_km:d,center_lat:s.lat,center_lng:s.lng,time_window:b?{start:b.start,end:b.end}:void 0,notify:!0}),F.success("Saved search");const N=yield O.listSavedSearches(r);y(N)}),X=()=>v(null,null,function*(){const b=oe.find(A=>A.id===f);yield O.subscribeAlert({user_id:r,sport:l==="all"?void 0:l,radius_km:d,center_lat:s.lat,center_lng:s.lng,start_time:b==null?void 0:b.start,end_time:b==null?void 0:b.end,notify_channels:["push"],active:!0}),F.success("Geofenced alert saved");const N=yield O.listGeoAlerts(r);w(N)});return e.jsxs(Q,{className:"p-4 border border-slate-200/80 shadow-sm bg-white/80 dark:bg-slate-900/80",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4 mb-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ze,{className:"w-5 h-5 text-cyan-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Live presence map"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Heatmap + clustering + geofenced alerts"})]}),e.jsxs(ue,{children:[_," live spots"]})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap justify-end",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-300",children:[e.jsx(qt,{className:"w-4 h-4"}),e.jsx("span",{children:"Clusters"}),e.jsx(ua,{checked:j,onCheckedChange:k})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-300",children:[e.jsx(Bt,{className:"w-4 h-4"}),e.jsx("select",{className:"text-sm border rounded-md px-2 py-1 bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700",value:f,onChange:b=>u(b.target.value),children:oe.map(b=>e.jsx("option",{value:b.id,children:b.label},b.id))})]}),e.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[e.jsx("span",{children:"Radius"}),e.jsx($e,{type:"number",value:d,min:1,max:50,step:.5,onChange:b=>m(Number(b.target.value)),className:"w-20 h-8"}),e.jsx("span",{className:"text-xs text-slate-500",children:"km"})]})]})]}),e.jsx("div",{className:"flex gap-2 mb-3 overflow-x-auto pb-2",children:He.map(b=>e.jsx($,{size:"sm",variant:l===b?"default":"outline",className:"capitalize rounded-full",onClick:()=>c(b),children:b},b))}),e.jsxs("div",{className:"relative h-80 rounded-xl overflow-hidden border border-slate-200 bg-white dark:bg-slate-900",children:[e.jsxs(ba,{center:[s.lat,s.lng],zoom:13,scrollWheelZoom:!0,className:"h-full w-full",children:[e.jsx(ja,{attribution:"Â© OpenStreetMap contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(ve,{center:[s.lat,s.lng],radius:10,pathOptions:{color:"#06b6d4",fillColor:"#22d3ee",fillOpacity:.4},children:e.jsx(we,{direction:"top",offset:[0,-4],opacity:1,children:e.jsx("div",{className:"text-xs font-medium text-cyan-800",children:"You"})})}),j?h.map(b=>e.jsx(ve,{center:[b.lat,b.lng],radius:Math.min(12+b.count*2,28),pathOptions:{color:"#f97316",fillColor:"#fb923c",fillOpacity:.35,weight:3},children:e.jsx(we,{direction:"top",offset:[0,-2],opacity:1,children:e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{className:"font-semibold",children:["Cluster â€¢ ",b.count," players"]}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:Object.entries(b.sports).map(([N,A])=>e.jsxs("span",{className:"px-1.5 py-0.5 bg-slate-100 text-slate-700 rounded-full border text-[10px]",children:[N,": ",A]},N))})]})})},b.id)):a.map(b=>{var N;return e.jsx(ve,{center:[b.latitude,b.longitude],radius:10,pathOptions:{color:"#22c55e",fillColor:"#bbf7d0",fillOpacity:.3,weight:3},children:e.jsx(we,{direction:"top",offset:[0,-2],opacity:1,children:e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsx("div",{className:"font-semibold capitalize",children:b.sport}),e.jsxs("div",{className:"text-slate-600",children:["Radius ",(N=b.radius_km)!=null?N:1," km"]})]})})},b.id)})]}),o&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/70 dark:bg-slate-900/70",children:e.jsx(Ye,{className:"w-5 h-5 animate-spin text-slate-600"})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"p-3 border rounded-lg bg-slate-50 dark:bg-slate-800/60 border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-200",children:[e.jsx(Dt,{className:"w-4 h-4"}),e.jsx("span",{children:"Saved searches"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx($e,{value:M,onChange:b=>W(b.target.value),className:"h-8 text-sm"}),e.jsx($,{size:"sm",onClick:E,children:"Save"})]})]}),e.jsxs("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:[S.length===0&&e.jsx("p",{className:"text-xs text-slate-500",children:"No saved searches yet."}),S.map(b=>e.jsxs("div",{className:"text-xs flex items-center justify-between bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-md px-2 py-1",children:[e.jsx("span",{className:"font-semibold",children:b.name}),e.jsxs("span",{className:"text-slate-500",children:[b.radius_km," km â€¢ ",b.sports.join(", ")]})]},b.id))]})]}),e.jsxs("div",{className:"p-3 border rounded-lg bg-slate-50 dark:bg-slate-800/60 border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-200",children:[e.jsx(Rt,{className:"w-4 h-4"}),e.jsx("span",{children:"Geofenced alerts"})]}),e.jsxs($,{size:"sm",variant:"outline",onClick:X,children:[e.jsx(Qe,{className:"w-4 h-4 mr-1"}),"Save alert"]})]}),e.jsxs("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:[g.length===0&&e.jsx("p",{className:"text-xs text-slate-500",children:"No alerts yet."}),g.map(b=>{var N;return e.jsxs("div",{className:"text-xs flex items-center justify-between bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-md px-2 py-1",children:[e.jsxs("span",{className:"font-semibold capitalize",children:[(N=b.sport)!=null?N:"any"," â€¢ ",b.radius_km," km"]}),e.jsxs("span",{className:"text-slate-500",children:["Active: ",b.active?"yes":"no"]})]},b.id)})]})]})]})]})}class va{trackEvent(i,o){return v(this,arguments,function*(s,t,a={}){const{error:n}=yield C.from("product_analytics_events").insert({user_id:t,event_name:s,context:a});if(n)throw n})}logStructured(o,n,l){return v(this,arguments,function*(s,t,a,i={}){const{error:c}=yield C.from("structured_logs").insert({component:s,level:t,message:a,context:i});if(c)throw c})}recordSyntheticCheck(s){return v(this,null,function*(){const{error:t}=yield C.from("synthetic_checks").insert(s);if(t)throw t})}getSyntheticStatuses(s=5){return v(this,null,function*(){const{data:t,error:a}=yield C.from("synthetic_checks").select("*").order("created_at",{ascending:!1}).limit(s);if(a)throw a;return t!=null?t:[]})}getDashboardCards(){return v(this,null,function*(){var c,d,m,f;const s=new Date(Date.now()-864e5).toISOString(),[t,a]=yield Promise.all([C.from("product_analytics_events").select("user_id, event_name, created_at").gte("created_at",s),C.from("structured_logs").select("id, level, created_at").gte("created_at",s)]),i=new Set(((c=t.data)!=null?c:[]).map(u=>u.user_id).filter(Boolean)).size,o=((d=t.data)!=null?d:[]).filter(u=>{var j;return(j=u.event_name)==null?void 0:j.includes("message")}).length,n=((m=t.data)!=null?m:[]).filter(u=>{var j;return(j=u.event_name)==null?void 0:j.includes("upload")}).length,l=((f=a.data)!=null?f:[]).filter(u=>u.level==="error").length;return[{title:"DAU (24h)",value:i.toString(),helper:"Distinct users in last 24h"},{title:"Messages sent",value:o.toString(),helper:"Events tagged with message"},{title:"Uploads success",value:n.toString(),helper:"Media/file uploads in last 24h"},{title:"Errors logged",value:l.toString(),trend:l>0?"down":"up",helper:"Structured errors captured"}]})}}const Ie=new va;function wa(){const[r,s]=p.useState([]),[t,a]=p.useState([]),[i,o]=p.useState(!1);return p.useEffect(()=>{v(null,null,function*(){o(!0);try{const[l,c]=yield Promise.all([Ie.getDashboardCards(),Ie.getSyntheticStatuses()]);s(l),a(c)}finally{o(!1)}})},[]),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Tt,{className:"w-4 h-4 text-emerald-500"}),e.jsx("h3",{className:"text-sm font-semibold text-slate-800 dark:text-slate-100",children:"In-product analytics"})]}),i&&e.jsxs("div",{className:"flex items-center gap-2 text-slate-500 text-sm",children:[e.jsx(Ye,{className:"w-4 h-4 animate-spin"})," Loading metricsâ€¦"]}),e.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-3",children:r.map(n=>{var l;return e.jsxs(Q,{className:"p-3 border border-slate-200/80 dark:border-slate-800/80",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("p",{className:"text-xs text-slate-500",children:n.title}),n.trend&&e.jsxs(ue,{variant:"secondary",className:"text-[10px]",children:[n.trend==="up"?"â†—":n.trend==="down"?"â†˜":"â†’"," ",(l=n.delta)!=null?l:""]})]}),e.jsx("div",{className:"text-2xl font-semibold text-slate-900 dark:text-slate-100",children:n.value}),n.helper&&e.jsx("p",{className:"text-[11px] text-slate-500 mt-1",children:n.helper})]},n.title)})}),e.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[e.jsx("span",{className:"text-sm font-semibold text-slate-800 dark:text-slate-100",children:"Synthetic checks"}),e.jsx(ue,{variant:"secondary",children:"latest"})]}),e.jsxs("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-3",children:[t.map(n=>{var l,c;return e.jsx(Q,{className:"p-3 border border-slate-200/80 dark:border-slate-800/80",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-slate-800 dark:text-slate-100",children:n.check_name}),e.jsxs("p",{className:"text-[11px] text-slate-500",children:[(l=n.region)!=null?l:"global"," â€¢ ",(c=n.latency_ms)!=null?c:"-"," ms"]})]}),n.status==="ok"?e.jsx(he,{className:"w-4 h-4 text-emerald-500"}):e.jsx(Je,{className:"w-4 h-4 text-amber-500"})]})},n.id)}),t.length===0&&!i&&e.jsx("p",{className:"text-xs text-slate-500",children:"No synthetic checks recorded yet."})]})]})}class Na{createSplit(s,t,a){return v(this,null,function*(){const i=t.reduce((l,c)=>l+c.share_amount,0),o=t.map(l=>U(D({},l),{share_amount:Number((l.share_amount/i*a).toFixed(2))})),{error:n}=yield C.from("payment_splits").upsert(o.map(l=>({event_id:s,user_id:l.user_id,share_amount:l.share_amount,status:"pending"})));if(n)throw n;return F.success("Split payment created"),o})}markPaid(s,t){return v(this,null,function*(){const{error:a}=yield C.from("payment_splits").update({status:"paid",paid_at:new Date().toISOString()}).eq("event_id",s).eq("user_id",t);if(a)throw a})}applyDropoutProration(s,t,a="dropout"){return v(this,null,function*(){const{data:i,error:o}=yield C.from("payment_splits").select("*").eq("event_id",s).eq("user_id",t).single();if(o)throw o;if(!i)return;const n=Number((i.share_amount*.8).toFixed(2)),{error:l}=yield C.from("payment_refunds").insert({payment_split_id:i.id,event_id:s,user_id:t,amount:n,reason:a,status:"pending"});if(l)throw l;F.success("Prorated refund queued")})}autoRefundOnCancellation(s,t="event_cancelled"){return v(this,null,function*(){const{data:a,error:i}=yield C.from("payment_splits").select("*").eq("event_id",s).eq("status","paid");if(i)throw i;if(!a)return;const{error:o}=yield C.from("payment_refunds").insert(a.map(n=>({payment_split_id:n.id,event_id:s,user_id:n.user_id,amount:n.share_amount,reason:t,status:"pending"})));if(o)throw o;F.success("Automatic refunds created")})}getVerificationTier(s){return v(this,null,function*(){const{data:t}=yield C.from("id_verification_tiers").select("*").eq("user_id",s).single();return t!=null?t:{user_id:s,tier:"none"}})}upsertVerificationTier(s,t,a){return v(this,null,function*(){const i={user_id:s,tier:t,provider:a,verified_at:new Date().toISOString(),expires_at:new Date(Date.now()+31536e6).toISOString()},{error:o}=yield C.from("id_verification_tiers").upsert(i);if(o)throw o;return i})}recordDeviceRisk(s){return v(this,null,function*(){var a;const{error:t}=yield C.from("device_risk_signals").insert({user_id:s.userId,session_id:s.sessionId,device_id:s.deviceId,risk_score:s.riskScore,signals:s.signals,decision:(a=s.decision)!=null?a:"allow"});if(t)throw t})}}const Ne=new Na;function ka({userId:r,eventId:s}){const[t,a]=p.useState(null);p.useEffect(()=>{v(null,null,function*(){try{const l=yield Ne.getVerificationTier(r);a(l)}catch(l){console.error("Failed to load verification tier",l)}})},[r]);const i=()=>v(null,null,function*(){try{const l=yield Ne.upsertVerificationTier(r,"verified","demo-provider");a(l),F.success("Verification tier updated")}catch(n){F.error("Failed to update tier")}}),o=()=>v(null,null,function*(){s&&(yield Ne.autoRefundOnCancellation(s,"event_cancelled"))});return e.jsxs(Q,{className:"p-4 border border-slate-200/80 dark:border-slate-800/80",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Yt,{className:"w-4 h-4 text-emerald-500"}),e.jsx("p",{className:"text-sm font-semibold text-slate-800 dark:text-slate-100",children:"Payments & Safety"}),t&&e.jsx(ue,{children:t.tier})]}),e.jsx($,{size:"sm",variant:"outline",onClick:i,children:"Upgrade verification"})]}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-3",children:[e.jsxs(Q,{className:"p-3 bg-slate-50 dark:bg-slate-800/60 border border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx($t,{className:"w-4 h-4 text-cyan-500"}),e.jsx("span",{className:"text-sm font-semibold",children:"Split payments"})]}),e.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Supports proration on dropouts and automatic refunds on cancel rules."})]}),e.jsxs(Q,{className:"p-3 bg-slate-50 dark:bg-slate-800/60 border border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Je,{className:"w-4 h-4 text-amber-500"}),e.jsx("span",{className:"text-sm font-semibold",children:"Risk scoring"})]}),e.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Device/session risk recorded; higher tiers unlock higher capacity events."})]})]}),s&&e.jsxs("div",{className:"flex items-center justify-between mt-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-slate-800 dark:text-slate-100",children:"Escrow + cancellations"}),e.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Automatic refunds for paid attendees if the event is cancelled."})]}),e.jsx($,{size:"sm",variant:"outline",onClick:o,children:"Trigger auto-refund"})]})]})}function ar({userId:r,userName:s,onClose:t}){const[a,i]=p.useState("home"),[o,n]=p.useState(""),{currentEvent:l,celebrate:c,clearCelebration:d}=na(),[m,f]=p.useState(!1),[u,j]=p.useState(!1);p.useEffect(()=>{const y=new Date().getHours();let g="",w="";y<12?(g="Good morning",w="â˜€ï¸"):y<17?(g="Good afternoon",w="ðŸŒ¤ï¸"):(g="Good evening",w="ðŸŒ™");const M=[`${g}, ${s.split(" ")[0]}! ${w}`,`Ready for greatness, ${s.split(" ")[0]}? ðŸš€`,`Let's make today epic, ${s.split(" ")[0]}! ðŸ’ª`];n(M[0])},[s]);const k=[{id:"home",label:"Home",icon:jt,color:"from-blue-500 to-cyan-500"},{id:"gamification",label:"Achievements",icon:z,color:"from-yellow-500 to-orange-500",badge:"ðŸ†•"},{id:"personalization",label:"Personalize",icon:Ke,color:"from-purple-500 to-pink-500",badge:"ðŸ†•"},{id:"wallet",label:"Wallet",icon:Me,color:"from-green-500 to-emerald-500"},{id:"trust",label:"Trust Score",icon:xe,color:"from-purple-500 to-pink-500"},{id:"activity",label:"Activity",icon:L,color:"from-cyan-500 to-blue-500"},{id:"settings",label:"Settings",icon:Et,color:"from-slate-500 to-slate-600"},{id:"friendship",label:"Friendship Map",icon:K,color:"from-blue-500 to-cyan-500"},{id:"compatibility",label:"Compatibility",icon:I,color:"from-pink-500 to-red-500"},{id:"gratitude",label:"Gratitude Wall",icon:Ut,color:"from-green-500 to-emerald-500"}];p.useEffect(()=>{const y=setTimeout(()=>{var w;const g=T.getRecentUnlocks(r,1);g.length>0&&Math.random()>.7&&c({type:"achievement_unlock",title:"Achievement Unlocked!",message:`You've earned "${g[0].title}"`,xpEarned:((w=g[0].reward)==null?void 0:w.xp)||0})},2e3);return()=>clearTimeout(y)},[]);const S=()=>{const y=me.getWallet(r),g=T.getUserLevel(r),w=T.getUnlockedAchievements(r),M=pe.getUnreadActivities().length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(x.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},whileHover:{scale:1.05},onClick:()=>i("wallet"),className:"bg-gradient-to-br from-green-900/20 to-emerald-900/20 rounded-2xl p-4 border border-green-500/20 cursor-pointer",children:[e.jsx(Me,{className:"w-8 h-8 text-green-400 mb-2"}),e.jsxs("div",{className:"text-2xl text-white mb-1",children:["â‚¹",(y==null?void 0:y.balance)||0]}),e.jsx("div",{className:"text-xs text-slate-400",children:"Wallet Balance"})]}),e.jsxs(x.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1},whileHover:{scale:1.05},onClick:()=>i("achievements"),className:"bg-gradient-to-br from-yellow-900/20 to-orange-900/20 rounded-2xl p-4 border border-yellow-500/20 cursor-pointer",children:[e.jsx(z,{className:"w-8 h-8 text-yellow-400 mb-2"}),e.jsx("div",{className:"text-2xl text-white mb-1",children:w.length}),e.jsx("div",{className:"text-xs text-slate-400",children:"Achievements"})]}),e.jsxs(x.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2},whileHover:{scale:1.05},onClick:()=>i("trust"),className:"bg-gradient-to-br from-purple-900/20 to-pink-900/20 rounded-2xl p-4 border border-purple-500/20 cursor-pointer",children:[e.jsx(xe,{className:"w-8 h-8 text-purple-400 mb-2"}),e.jsxs("div",{className:"text-2xl text-white mb-1",children:["Level ",g.level]}),e.jsx("div",{className:"text-xs text-slate-400",children:g.title})]}),e.jsxs(x.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3},whileHover:{scale:1.05},onClick:()=>i("activity"),className:"bg-gradient-to-br from-cyan-900/20 to-blue-900/20 rounded-2xl p-4 border border-cyan-500/20 cursor-pointer relative",children:[e.jsx(L,{className:"w-8 h-8 text-cyan-400 mb-2"}),e.jsx("div",{className:"text-2xl text-white mb-1",children:M}),e.jsx("div",{className:"text-xs text-slate-400",children:"New Updates"}),M>0&&e.jsx(x.div,{animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},className:"absolute top-2 right-2 w-2 h-2 bg-cyan-500 rounded-full"})]})]}),e.jsxs("div",{className:"bg-slate-800/40 rounded-2xl p-5 border border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-white flex items-center gap-2",children:[e.jsx(R,{className:"w-5 h-5"}),"Recent Activity"]}),e.jsxs($,{onClick:()=>i("activity"),variant:"ghost",className:"text-cyan-400 hover:text-cyan-300 text-sm",children:["View All",e.jsx(Ft,{className:"w-4 h-4 ml-1"})]})]}),e.jsx(qs,{limit:5})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs(x.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>c({type:"trust_increase",title:"Trust Score Increased!",message:"Keep up the great work!",xpEarned:50}),className:"bg-gradient-to-br from-purple-600 to-pink-600 rounded-2xl p-5 text-left",children:[e.jsx(H,{className:"w-8 h-8 text-white mb-2"}),e.jsx("h4",{className:"text-white mb-1",children:"View Trust Breakdown"}),e.jsx("p",{className:"text-sm text-purple-100",children:"See how you're doing"})]}),e.jsxs(x.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>i("achievements"),className:"bg-gradient-to-br from-yellow-600 to-orange-600 rounded-2xl p-5 text-left",children:[e.jsx(z,{className:"w-8 h-8 text-white mb-2"}),e.jsx("h4",{className:"text-white mb-1",children:"Unlock Achievements"}),e.jsx("p",{className:"text-sm text-yellow-100",children:"Level up your profile"})]})]})]})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-indigo-950 to-slate-950",children:e.jsxs("div",{className:"flex h-screen overflow-hidden",children:[e.jsxs(x.div,{initial:{x:-300},animate:{x:0},className:"w-64 bg-slate-900/60 backdrop-blur-xl border-r border-slate-800 p-6 flex flex-col",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-red-500 via-yellow-500 to-green-500 rounded-xl flex items-center justify-center",children:e.jsx(R,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-white",children:"Avento"}),e.jsx("p",{className:"text-xs text-slate-400",children:"Dashboard"})]})]})}),e.jsx("nav",{className:"flex-1 space-y-2",children:k.map(y=>e.jsxs(x.button,{onClick:()=>i(y.id),whileHover:{x:4},whileTap:{scale:.98},className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${a===y.id?`bg-gradient-to-r ${y.color} text-white shadow-lg`:"text-slate-400 hover:bg-slate-800/60 hover:text-white"}`,children:[e.jsx(y.icon,{className:"w-5 h-5"}),e.jsx("span",{children:y.label}),y.badge&&e.jsx("span",{className:"ml-2 text-xs bg-red-500 text-white px-1 py-0.5 rounded-full",children:y.badge})]},y.id))}),t&&e.jsxs($,{onClick:t,variant:"outline",className:"w-full mt-4 bg-slate-800 hover:bg-slate-700 text-white border-slate-700",children:[e.jsx(yt,{className:"w-4 h-4 mr-2"}),"Close Dashboard"]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsxs("div",{className:"max-w-6xl mx-auto p-8",children:[e.jsxs(x.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[e.jsx("h1",{className:"text-white mb-2",children:o}),e.jsxs("p",{className:"text-slate-400",children:[a==="home"&&"Welcome to your personalized dashboard",a==="achievements"&&"Track your progress and unlock new achievements",a==="wallet"&&"Manage your wallet and transactions",a==="trust"&&"Build your reputation in the community",a==="activity"&&"Stay updated with community activity",a==="settings"&&"Customize your notification preferences",a==="friendship"&&"Explore your connections",a==="compatibility"&&"Discover compatibility scores",a==="gratitude"&&"Express gratitude to others",a==="personalization"&&"Tailor your experience",a==="gamification"&&"Enhance your gameplay"]})]}),e.jsx(ie,{mode:"wait",children:e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[a==="home"&&S(),a==="achievements"&&e.jsx(Xs,{userId:r}),a==="wallet"&&e.jsx(Js,{userId:r}),a==="trust"&&e.jsx(ea,{userId:r}),a==="activity"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(ya,{userId:r}),e.jsx(wa,{}),e.jsx(ka,{userId:r}),e.jsx(Is,{userId:r,limit:50})]}),a==="settings"&&e.jsx(ta,{userId:r}),a==="friendship"&&e.jsx(aa,{userId:r}),a==="compatibility"&&e.jsx(ra,{userId:r}),a==="gratitude"&&e.jsx(ia,{userId:r}),a==="personalization"&&e.jsx(sa,{userId:r,onClose:()=>i("home")}),a==="gamification"&&e.jsx(Gs,{userId:r,onClose:()=>i("home")})]},a)})]})})]})}),e.jsx(la,{event:l,onComplete:d})]})}export{ar as ComprehensiveDashboard};
